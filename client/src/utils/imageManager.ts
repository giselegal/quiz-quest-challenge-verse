// Fallback images - usando placeholders ou imagens locais
export const fallbackImages = {
  default: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI0Y3RjJFOSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiNCODlCN0EiPkltYWdlbSBOw6NvIERpc3BvbsOtdmVsPC90ZXh0Pjwvc3ZnPg==',
  logo: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430327/LOGO_DA_MARCA_GISELE_l78gin.png'
};

// Novas imagens funcionais do Cloudinary (der8kogzu) - Organizadas por seção
export const workingImages = {
  // Logo e introdução
  logo: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430327/LOGO_DA_MARCA_GISELE_l78gin.png',
  introBg: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752443943/Gemini_Generated_Image_i5cst6i5cst6i5cs_fpoukb.png',
  
  // Antes e depois
  beforeAfter1: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430348/MARIANGELA_-_ANTES_E_DEPOIS_ipuoap.png',
  beforeAfter2: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430335/ADRIANA-_ANTES_E_DEPOIS_ttgifc.png',
  
  // Depoimentos
  testimonial1: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430304/DEPOIMENTO_COM_IMAGEM_-_S?NIA_q0g9cq.png',
  testimonial2: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430304/DEPOIMENTO_COM_IMAGEM_-_PATR?CIA_x0mhud.png',
  testimonial3: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430304/DEPOIMENTO_COM_IMAGEM_-_MARIANGELA_sj7lki.png',
  
  // Questões estratégicas - Imagens IA Antes e Depois de Conhecer o Estilo
  strategicImages: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430327/MULHER_ELEGANTE_COM_GUIA_DE_ESTILO_euxps7.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430327/MULHER_FRUSTRADA_NA_FRENTE_DO_GUARDA-ROUPA_jnrwcr.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430326/MOCKUPS_DE_TODOS_OS_PRODUTOS_-_GUIAS_DE_ESILOS_E_B?NUS_legwsb.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430303/COMPRAS_COMPULSIVAS_X_DIRE??O_COM_O_GUIA_DE_ESTILO_xy0hb3.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430301/COMPRAS_COMPULSIVAS_X_DIRE??O_COM_O_GUIA_DE_ESTILO_-_2_nzsd7q.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430348/IMANGES_MULHERES_8_ESTILOS_UNIVERSAIS_blvkgv.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430338/ChatGPT_Image_23_de_abr._de_2025_05_11_05_j0tw87.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430348/MULHER_SEM_ESTILO_E_PERDIDA_HH_0TRK1A_hse63r.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430347/MULHER_COMPRAS_COMPULSIVAS_GUARDA-ROUPA_CHEIO_ff5k11.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430316/IMAGENS_DE_TODOS_OS_GUIAS_DE_ESTILO_c5auzb.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430331/ANTES_E_DEPOIS_MULHER_-_CEN?RIO_RUA_ratm8d.png'
  ],
  
  // Seção oferta - Bônus - Mockups dos Produtos
  offerImages: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752444310/MOCKUP_TABLET_VISAGISMO_kq6yew.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752444259/MOCKUPS_REVISTA_CELULAR_GUIA_DE_ESTILO_wd8uec.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752431503/Estilos_Universais_Quiz_1_rklt2f.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752431483/Estilos_Universais_Quiz_fr3bxa.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430445/PE?AS_-_CHAVE_DO_GUARDA-ROUPA_DE_SUCESSO_-_REVISTA_-_B?NUS_1_lbv7qe.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430393/C?pia_de_01.__P?gina___-_Produto_de_Entrada_1080_x_1000_px_1_ugzu3n.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430383/IMAGEM_8_ESTILOS_UNIVERSAIS_Sd9XfgcdH_ievpxw.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430352/PE?AS_-_CHAVE_DO_GUARDA-ROUPA_DE_SUCESSO_-_IMAGENS_CELULAR_-_REVISTA_-_B?NUS_1_jacoih.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430350/PE?AS_-_CHAVE_DO_GUARDA-ROUPA_DE_SUCESSO_-_IMAGENS_CELULAR_-_GUIA_VISAGISMO_-_B?NUS_1_ggyk57.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430350/PE?AS_-_CHAVE_DO_GUARDA-ROUPA_DE_SUCESSO_-_REVISTA_COM_IMAGEM_DA_GISELE_-_GUIA_VISAGISMO_-_B?NUS_1_rsza7t.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430325/MOCKUPS_DE_TODOS_OS_PRODUTOS_-_GUIAS_DE_ESILOS_E_B?NUS_-_COM_FUNDO_o9dmxb.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430324/MOCKUP_-_GUIAS_IMAGEM_8_ESTILOS_ym9ouh.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430347/MOCKUPS_IMAGENS_DO_GUIA_DE_ESILOS_xdkpdn.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430335/QUAL_ESTILO_?_O_SEU__vdt6fo.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430324/MOCKUP_-_GUIAS-_3_CAPAS_uua2mh.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430337/GUIA_VISAGISMO_-_B?NUS_2_ib3mls.png'
  ],
  
  // Seção Mentoria
  mentoriaImages: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430305/GISELE-GALV?O-POSE-ACESSIBILIDADE_bggaap.jpg',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430305/GISELE_GALV?O_-_ESPELHO_lsznbv.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430319/GISELE-GALV?O-POSE-ACESSIBILIDADE_iyt9rg.png'
  ],
  
  // Resultado - Imagem do Estilo Predominante e Guia referente ao estilo (pares estilo-guia)
  resultStyleGuides: {
    natural: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430262/Q1_-_A_xlh5cg.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430313/GUIA_NATURAL_dlhcwm.png'
    },
    classico: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430263/Q1_-_B_bm79bg.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430311/GUIA_CL?SSICO_rfpptj.png'
    },
    contemporaneo: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430262/Q1_-_C_n2at5j.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430311/GUIA_CONTEMPOR?NEO_hqqqzp.png'
    },
    elegante: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430264/Q1_-_D_psbhs9.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430312/GUIA_ELEGANTE_mdozq9.png'
    },
    romantico: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430272/Q1_-_E_pwhukq.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430313/GUIA_ROM?NTICO_e96ecf.png'
    },
    sexy: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430272/Q1_-_F_z1nyug.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430314/GUIA_SEXY_i0z60a.png'
    },
    dramatico: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430268/Q1_-_G_zgy8mq.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430312/GUIA_DRAM?TICO_sitfk0.png'
    },
    criativo: {
      style: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430269/Q1_-_H_dqhkzv.png',
      guide: 'https://res.cloudinary.com/der8kogzu/image/upload/v1752430311/GUIA_CRIATIVO_sqjlwg.png'
    }
  },
  
  // Questão 1
  q1: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430262/Q1_-_A_xlh5cg.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430263/Q1_-_B_bm79bg.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430262/Q1_-_C_n2at5j.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430264/Q1_-_D_psbhs9.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430272/Q1_-_E_pwhukq.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430272/Q1_-_F_z1nyug.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430268/Q1_-_G_zgy8mq.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430269/Q1_-_H_dqhkzv.png'
  ],
  
  // Questão 2
  q2: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430272/Q3_-_A_plsfwp.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430270/Q3_-_B_w75tyg.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430270/Q3_-_C_ep9x9h.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430271/Q3_-_D_xxra9m.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430278/Q3_-_E_lr9p2d.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430280/Q3_-_F_amdr7l.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430279/Q3_-_G_zod0w5.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430276/Q3_-_H_aghfg8.png'
  ],
  
  // Questão 4
  q4: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430276/Q4_-_A_k6gvtc.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430277/Q4_-_B_a1emi6.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430277/Q4_-_C_ywcxcx.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430277/Q4_-_D_y7u29d.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430277/Q4_-_E_gnuvl3.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430291/Q4_-_F_lzrw2j.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430289/Q4_-_G_vr81is.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430290/Q4_-_H_yjbt0s.png'
  ],
  
  // Questão 5
  q5: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430280/Q5_-_A_p0yqat.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430280/Q5_-_B_jj8onw.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430282/Q5_-_C_v8qknl.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430281/Q5_-_D_oqgb1n.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430281/Q5_-_E_vfqrkt.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430282/Q5_-_F_pcbp5z.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430283/Q5_-_G_qp9e8y.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430283/Q5_-_H_wd8vlf.png'
  ],
  
  // Questão 6
  q6: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430285/Q6_-_A_ydwyde.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430285/Q6_-_B_xz6flj.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430286/Q6_-_C_zk2ab3.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430286/Q6_-_D_hh759o.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430286/Q6_-_E_opj922.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430287/Q6_-_F_n4mgoz.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430294/Q6_-_G_ue5itf.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430296/Q6_-_H_t6xmoz.png'
  ],
  
  // Questão 7
  q7: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430292/Q7_-_A_txdfij.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430294/Q7_-_B_xp3bqm.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430299/Q7_-_C_vzwcvi.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430296/Q7_-_D_vzgr64.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430295/Q7_-_E_akiks2.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430296/Q7_-_F_u8oswz.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430329/Q7_-_G_bnnneg.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430328/Q7_-_H_votjzt.png'
  ],
  
  // Questão 8
  q8: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430297/Q8_-_A_zk7yf0.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430300/Q8_-_B_azy3ox.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430335/Q8_-_C_theeds.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430335/Q8_-_D_ocqyca.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430334/Q8_-_E_i7b4hk.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430334/Q8_-_F_wa1spu.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430334/Q8_-_G_fo3y4o.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430335/Q8_-_H_qe9iqk.png'
  ],
  
  // Questão 9
  q9: [
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430351/Q9_-_A_cffjcw.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752431503/Q9_B.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752431483/Q9_C_fr3bxa.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430353/Q9_-_D_e1flwe.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430363/Q9_-_E_f9thcb.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430351/Q9_-_F_gtxs9r.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430352/Q9_-_G_bihqmg.png',
    'https://res.cloudinary.com/der8kogzu/image/upload/v1752430352/Q9_-_H_bddztd.png'
  ]
};

/**
 * Mapeamento de imagens quebradas para imagens funcionais
 */
const brokenToWorkingImageMap: Record<string, string> = {
  // Questão 1 - mapear imagens numeradas antigas para novas
  '14_l2nprc.webp': workingImages.q1[0],
  '4_snhaym.webp': workingImages.q1[1], 
  '15_xezvcy.webp': workingImages.q1[2],
  '16_mpqpew.webp': workingImages.q1[3],
  '11_hqmr8l.webp': workingImages.q1[4],
  '12_edlmwf.webp': workingImages.q1[5],
  '18_j8ipfb.webp': workingImages.q1[6],
  '17_m5ogub.webp': workingImages.q1[7],
  
  // Questão 2
  '2_ziffwx.webp': workingImages.q2[0],
  '5_dhrgpf.webp': workingImages.q2[1],
  '9_x6so6a.webp': workingImages.q2[2],
  '7_ynez1z.webp': workingImages.q2[3],
  '13_uvbciq.webp': workingImages.q2[4],
  '3_asaunw.webp': workingImages.q2[5],
  '6_gnoxfg.webp': workingImages.q2[6],
  '8_yqu3hw.webp': workingImages.q2[7],

  // Questões mais avançadas
  '20_oh44vh.webp': workingImages.q4[0],
  '21_o7wkte.webp': workingImages.q4[1],
  '26_dptanw.webp': workingImages.q4[2],
  '23_bdfxrh.webp': workingImages.q4[3],
  '22_siebw2.webp': workingImages.q4[4],
  '24_nptszu.webp': workingImages.q4[5],
  '25_motk6b.webp': workingImages.q4[6],
  '27_wxmklx.webp': workingImages.q4[7],
  
  // Logo
  'logo.webp': workingImages.logo,
  'LOGO_DA_MARCA_GISELE': workingImages.logo
};

/**
 * Função para substituir URLs quebradas do Cloudinary por imagens funcionais
 */
export const getImageUrlWithFallback = (originalUrl: string): string => {
  if (!originalUrl) return fallbackImages.default;
  
  // Se for uma URL do Cloudinary quebrada (dqljyf76t)
  if (originalUrl.includes('res.cloudinary.com/dqljyf76t')) {
    // Extrair o nome do arquivo
    const fileName = originalUrl.split('/').pop()?.split('.')[0];
    
    // Procurar no mapeamento
    for (const [brokenKey, workingUrl] of Object.entries(brokenToWorkingImageMap)) {
      if (originalUrl.includes(brokenKey) || fileName?.includes(brokenKey.split('.')[0])) {
        console.log(`✅ Mapped broken image: ${brokenKey} -> ${workingUrl}`);
        return workingUrl;
      }
    }
    
    // Se não encontrou no mapa, usar uma imagem estratégica aleatória
    const randomStrategic = workingImages.strategicImages[Math.floor(Math.random() * workingImages.strategicImages.length)];
    console.warn(`⚠️ Using random strategic image for: ${originalUrl}`);
    return randomStrategic;
  }
  
  // Se for logo.webp
  if (originalUrl.includes('logo.webp')) {
    return workingImages.logo;
  }
  
  return originalUrl;
};

interface ImageMetadata {
  width?: number;
  height?: number;
  alt?: string;
  loaded?: boolean;
}

const imageCache = new Map<string, ImageMetadata>();

export const preloadImage = (src: string): Promise<void> => {
  const safeSrc = getImageUrlWithFallback(src);
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.onload = () => {
      imageCache.set(src, {
        width: img.naturalWidth,
        height: img.naturalHeight,
        loaded: true,
        alt: `Image ${src}`
      });
      resolve();
    };
    img.onerror = () => {
      console.warn(`Failed to preload image: ${src}`);
      // Não rejeitamos para não quebrar o resto da aplicação
      resolve();
    };
    img.src = safeSrc;
  });
};

export const preloadImages = (urls: string[]): Promise<void[]> => {
  return Promise.all(urls.map(preloadImage));
};

export const getOptimizedImageUrl = (src: string, options?: { width?: number; height?: number; quality?: number; format?: string }): string => {
  // Simple implementation - in a real app, this would handle Cloudinary transformations
  return src;
};

export const getLowQualityPlaceholder = (src: string): string => {
  // Simple implementation - in a real app, this would generate a low-quality placeholder
  return src;
};

export const preloadCriticalImages = (urls: string[]): Promise<void[]> => {
  return preloadImages(urls);
};

export const preloadImagesByUrls = (urls: string[]): Promise<void[]> => {
  return preloadImages(urls);
};

export const getImageMetadata = (src: string): ImageMetadata => {
  return imageCache.get(src) || { width: undefined, height: undefined, alt: undefined, loaded: false };
};

export const isImagePreloaded = (src: string): boolean => {
  const metadata = imageCache.get(src);
  return metadata?.loaded || false;
};

export const getOptimizedImage = (src: string, options?: { width?: number; height?: number; quality?: number; format?: string }): string => {
  return getOptimizedImageUrl(src, options);
};

/**
 * Funções utilitárias para acessar facilmente as categorias de imagens
 */

// Obter imagens de uma questão específica
export const getQuestionImages = (questionNumber: number): string[] => {
  const questionKey = `q${questionNumber}` as keyof typeof workingImages;
  return Array.isArray(workingImages[questionKey]) ? workingImages[questionKey] : [];
};

// Obter imagem aleatória de questões estratégicas
export const getRandomStrategicImage = (): string => {
  const strategicImages = workingImages.strategicImages;
  return strategicImages[Math.floor(Math.random() * strategicImages.length)];
};

// Obter par estilo-guia para página de resultado
export const getStyleGuideImagePair = (style: string): { style: string; guide: string } => {
  const normalizedStyle = style.toLowerCase().replace(/[^a-z]/g, '');
  const styleData = workingImages.resultStyleGuides[normalizedStyle as keyof typeof workingImages.resultStyleGuides];
  
  if (styleData) {
    return styleData;
  }
  
  // Fallback para estilo elegante se não encontrar
  return workingImages.resultStyleGuides.elegante;
};

// Obter imagem aleatória da seção de ofertas/mockups
export const getRandomOfferImage = (): string => {
  const offerImages = workingImages.offerImages;
  return offerImages[Math.floor(Math.random() * offerImages.length)];
};

// Obter imagem aleatória da seção de mentoria
export const getRandomMentoriaImage = (): string => {
  const mentoriaImages = workingImages.mentoriaImages;
  return mentoriaImages[Math.floor(Math.random() * mentoriaImages.length)];
};

// Obter depoimento específico por índice
export const getTestimonialImage = (index: number): string => {
  if (index === 0) return workingImages.testimonial1;
  if (index === 1) return workingImages.testimonial2;
  if (index === 2) return workingImages.testimonial3;
  return workingImages.testimonial1; // fallback
};

// Obter imagem de antes/depois específica por índice
export const getBeforeAfterImage = (index: number): string => {
  if (index === 0) return workingImages.beforeAfter1;
  if (index === 1) return workingImages.beforeAfter2;
  return workingImages.beforeAfter1; // fallback
};

// Função para validar se uma URL é de uma imagem válida do sistema
export const isValidImageUrl = (url: string): boolean => {
  return url.includes('res.cloudinary.com/der8kogzu') && url.includes('v1752');
};

export default {
  getImageUrlWithFallback,
  getQuestionImages,
  getRandomStrategicImage,
  getStyleGuideImagePair,
  getRandomOfferImage,
  getRandomMentoriaImage,
  getTestimonialImage,
  getBeforeAfterImage,
  isValidImageUrl,
  workingImages,
  fallbackImages
};
