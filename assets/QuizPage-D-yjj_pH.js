import{j as e,m as t,A as s}from"./vendor-ui-osK9DzZo.js";import{r as a,c as i,u as r}from"./vendor-react-BFBzZzDX.js";import{t as o,L as n,a as l,b as c}from"./index-CJWu_7KR.js";import{g as d,d as u,i as m,c as g,B as x,a as p,e as h}from"./quiz-intro-BplHFC3N.js";import{a as f}from"./use-mobile-Bm5YhP0o.js";import{d as y}from"./ui-components-DOTaqTTj.js";import{O as v,A as b}from"./animated-wrapper-Djluhkcf.js";import{A as w}from"./arrow-right-DDlgVM9X.js";import{P as j}from"./progress-BvtZe0GK.js";import{C as S}from"./card-BvxQYS25.js";import{t as N,e as C,f as A,g as _}from"./analytics-nnBgKcWZ.js";const q=({children:t})=>{const s=a.useRef(null);return e.jsx("div",{className:"min-h-screen bg-[#FEFEFE] px-4 py-8",ref:s,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:t})})},E=e=>{const t=[...new Set(["transformar","evoluir","versão","autenticidade","experiência","clareza","intenção","propósito","consciência","confiante","imagem","estilo","presença","elegância","identidade","combiná-las","looks","peças","roupas","guarda-roupa","desconectada","dúvidas","segura","confiante","arrependo","indecisão","limitada","impulso","autoridade","admirada","estilosa","exclusivo","estratégico","prático","completa","perfeito","facilidade","investimento","resultado","experiência","material","compromisso","escolhas","autenticidade","leveza","transformar","aplicar","comprar","vestir","montar","criar","usar","valoriza","funciona"])].sort(((e,t)=>t.length-e.length)),s=new RegExp(`(${t.join("|")})`,"gi");return e.split(s).map(((e,s)=>t.some((t=>e.toLowerCase()===t.toLowerCase()))?i.createElement("strong",{key:s,className:"text-[#432818] font-medium"},e):e))};var I=a.forwardRef(((t,s)=>{const{ratio:a=1,style:i,...r}=t;return e.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:100/a+"%"},"data-radix-aspect-ratio-wrapper":"",children:e.jsx(y.div,{...r,ref:s,style:{...i,position:"absolute",top:0,right:0,bottom:0,left:0}})})}));I.displayName="AspectRatio";const Q=I,k=e=>({backgroundColor:{Natural:"#8F7A6A","Contemporâneo":"#B89B7A","Clássico":"#432818",Elegante:"#AA6B5D","Romântico":"#D4A5A5",Sexy:"#9E2B2B","Dramático":"#2B2B2B",Criativo:"#F0A500"}[e]||"#B89B7A",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",textAlign:"center",fontWeight:"bold",fontSize:"14px",padding:"10px"}),B=({imageUrl:t,altText:s,styleCategory:i,isSelected:r,is3DQuestion:o,questionId:n})=>{const l=f(),[c,x]=a.useState(!1),[p,h]=a.useState(!1),y=a.useMemo((()=>d(t)),[t]),b=a.useMemo((()=>u(t,{quality:95,format:"auto",width:t.includes("sapatos")?400:500})),[t]);return a.useEffect((()=>{m(t)&&h(!0)}),[t]),c?e.jsx("div",{className:"w-full h-full",style:k(i),children:e.jsx("span",{children:i})}):e.jsx("div",{className:g("w-full relative flex-grow overflow-hidden","md:mx-auto",!l&&"md:max-w-[40%]"),children:e.jsx(Q,{ratio:t.includes("sapatos")?1:3/4,className:"w-full h-full",children:e.jsx("div",{className:g("w-full h-full flex items-center justify-center overflow-hidden transform-gpu",r&&"scale-[1.03] transition-all duration-300"),children:e.jsx(v,{src:b,alt:(null==y?void 0:y.alt)||s,className:g("object-cover w-full h-full",r?"shadow-3d":"shadow-sm hover:shadow-md",r&&o&&"transform-3d rotate-y-12"),onLoad:()=>h(!0),priority:!0})})})})},z=({option:t,isSelected:s,onSelect:i,type:r,questionId:o,isDisabled:n=!1,isStrategicOption:l=!1})=>{var c,d;const u=f(),m=(null==(c=t.imageUrl)?void 0:c.includes("sapatos"))||(null==(d=t.imageUrl)?void 0:d.includes("calca")),x=a.useRef(null);a.useEffect((()=>{x.current&&(s?"text"===r?(x.current.style.borderColor="#b29670",x.current.style.boxShadow=l?"0 6px 12px rgba(178, 150, 112, 0.35)":"0 4px 8px rgba(178, 150, 112, 0.25)"):(x.current.style.borderColor="transparent",x.current.style.boxShadow=l?"0 15px 30px rgba(0, 0, 0, 0.25)":"0 12px 24px rgba(0, 0, 0, 0.2)"):"text"===r?(x.current.style.borderColor="#B89B7A",x.current.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"):(x.current.style.borderColor="transparent",x.current.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"))}),[s,r,l]);return e.jsx("div",{className:g("relative h-full",n&&"opacity-50 cursor-not-allowed"),onClick:()=>{n||(x.current&&("text"===r&&(x.current.style.borderColor=s?"#B89B7A":"#b29670"),x.current.style.boxShadow=s?"0 2px 4px rgba(0, 0, 0, 0.05)":l?"text"===r?"0 6px 12px rgba(178, 150, 112, 0.35)":"0 15px 30px rgba(0, 0, 0, 0.25)":"text"===r?"0 4px 8px rgba(178, 150, 112, 0.25)":"0 12px 24px rgba(0, 0, 0, 0.2)"),setTimeout((()=>{i(t.id)}),10))},children:e.jsxs("div",{ref:x,className:g("relative h-full flex flex-col rounded-lg overflow-hidden","cursor-pointer","text"===r&&"p-4 border","text"!==r&&"border-0","bg-[#FEFEFE] shadow-sm hover:shadow-md transition-all duration-300"),children:["text"!==r&&t.imageUrl&&e.jsx(B,{imageUrl:t.imageUrl,altText:t.text,styleCategory:t.styleCategory,isSelected:s,is3DQuestion:m,questionId:o||""}),e.jsx("p",{className:g("text"!==r?g("leading-tight font-medium py-1 px-2 mt-auto text-[#432818] relative",u?"text-[0.7rem]":"text-[0.7rem] sm:text-sm"):g("leading-relaxed text-[#432818]",u?"text-[0.75rem]":"text-sm sm:text-base")),children:E(t.text)}),e.jsx("div",{className:g("absolute -top-0.5 -right-0.5 w-4 h-4 bg-[#b29670] rounded-full flex items-center justify-center z-10",s?"block":"hidden"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})})},F=t=>{const{question:s,onAnswer:i,currentAnswers:r,autoAdvance:o=!1,hideTitle:n=!1,onNextClick:l,onPreviousClick:c,showQuestionImage:d=!1,isStrategicQuestion:u=!1}=t;if(!s||!s.title||!Array.isArray(s.options))return e.jsx("div",{className:"w-full max-w-2xl mx-auto py-12 text-center text-red-700",children:"Erro: Dados da questão ausentes ou inválidos. Por favor, recarregue a página ou tente novamente mais tarde."});const m=f(),p="text"!==s.type,[h,y]=a.useState(!1),{scrollToQuestion:v}={scrollToQuestion:a.useCallback((e=>{const t=document.getElementById(`question-title-${e}`);if(t)return void t.scrollIntoView({behavior:"smooth",block:"start"});const s=document.getElementById(`question-${e}`);s&&s.scrollIntoView({behavior:"smooth",block:"start"})}),[])},[b,j]=a.useState(!1);a.useEffect((()=>{v(s.id)}),[s.id,v]),a.useEffect((()=>{if(u){const e=r.length>0;e!==b&&j(e)}}),[r,u,b]);const S=e=>{let t;t=r.includes(e)?r.filter((t=>t!==e)):u?[e]:s.multiSelect&&r.length>=s.multiSelect?[...r.slice(1),e]:[...r,e],i({questionId:s.id,selectedOptions:t});const a=!u&&o&&t.length===s.multiSelect;t.length===s.multiSelect?j(!0):j(!1),a&&l&&setTimeout((()=>{l()}),300)};return e.jsxs("div",{className:g("w-full max-w-6xl mx-auto pb-5 relative",m&&"px-2",u&&"max-w-3xl"),id:`question-${s.id}`,children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{id:`question-title-${s.id}`,className:g("font-playfair text-center mb-5 px-3 pt-3 text-brand-coffee font-semibold tracking-normal",m?"text-base":"text-base sm:text-xl",u&&"text-[#432818] mb-6 font-medium whitespace-pre-line"),children:E(s.title)}),u&&s.imageUrl&&!h&&d&&e.jsx("div",{className:"w-full mb-6",children:e.jsx("img",{src:s.imageUrl,alt:"Question visual",className:"w-full max-w-md mx-auto rounded-lg shadow-sm",onError:()=>{y(!0)}})}),!(!o&&!u)&&e.jsx("p",{className:"text-xs sm:text-sm text-[#1A1818]/70 px-2 py-2 mb-4 text-center font-medium",children:u?"Selecione 1 opção para avançar":`Selecione ${s.multiSelect} opções para avançar`})]}),e.jsx("div",{className:g("grid h-full","text"===s.type?u||m?"grid-cols-1 gap-3 px-2":"grid-cols-1 gap-4 px-4":m?"grid-cols-2 gap-1 px-0.5":"grid-cols-2 gap-3 px-2",p&&"mb-4 relative",u&&"gap-4"),children:s.options.map((t=>e.jsx(z,{option:t,isSelected:r.includes(t.id),onSelect:S,type:s.type,questionId:s.id,isDisabled:!r.includes(t.id)&&!u&&r.length>=s.multiSelect,isStrategicOption:u},t.id)))}),u&&l&&e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(x,{onClick:l,disabled:0===r.length,className:g("text-white font-semibold py-3 px-8 rounded-lg shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-opacity-50","disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none",b&&0!==r.length?"bg-brand-primary hover:bg-brand-primary/90 transform hover:scale-105 focus:ring-brand-primary hover:shadow-lg":"bg-brand-primary",0===r.length&&"bg-gray-300 hover:bg-gray-300"),children:["Continuar ",e.jsx(w,{className:"ml-2 h-5 w-5"})]})}),e.jsxs("div",{className:"text-center mt-6",children:[!o&&!u&&e.jsxs("p",{className:"text-xs sm:text-sm text-[#1A1818]/70 px-2 py-2 text-center font-medium",children:["Selecione ",s.multiSelect," ",1===s.multiSelect?"Opção":"Opções"," para avançar"]}),!u&&o&&l&&e.jsx("div",{className:"mt-2",children:e.jsxs(x,{onClick:l,disabled:!b,className:g("text-white font-semibold py-3 px-8 rounded-lg shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-opacity-50","disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none",b?"bg-brand-primary hover:bg-brand-primary/90 transform hover:scale-105 focus:ring-brand-primary hover:shadow-lg":"bg-gray-300 hover:bg-gray-300"),children:["Próximo ",e.jsx(w,{className:"ml-2 h-5 w-5"})]})})]})]})},P=({userName:t,currentQuestionIndex:s,totalQuestions:a,showingStrategicQuestions:i,currentStrategicQuestionIndex:r})=>e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx(j,{value:Math.round((s+1)/a*100),className:"w-full h-2 bg-[#B89B7A]/20",indicatorClassName:"bg-[#B89B7A]"})}),e.jsxs(b,{className:"flex justify-between items-center mb-8",children:[e.jsxs("h1",{className:"text-base font-playfair text-[#432818]",children:["Olá, ",t||"Visitante","!"]}),e.jsxs("div",{className:"text-sm text-[#1A1818]/60",children:[i?r+1:s+1," de ",a]})]})]}),O=[{id:"strategic-1",title:"Como você se sente em relação ao seu estilo pessoal hoje?",type:"text",multiSelect:1,options:[{id:"strategic-1-1",text:"Completamente perdida, não sei o que combina comigo",styleCategory:"Strategic"},{id:"strategic-1-2",text:"Tenho algumas ideias, mas não sei como aplicar",styleCategory:"Strategic"},{id:"strategic-1-3",text:"Conheço meu estilo, mas quero refiná-lo",styleCategory:"Strategic"},{id:"strategic-1-4",text:"Estou satisfeita, só buscando inspiração",styleCategory:"Strategic"}]},{id:"strategic-2",title:"Qual é o maior desafio que você enfrenta ao se vestir?",type:"text",multiSelect:1,options:[{id:"strategic-2-1",text:"Nunca sei o que combina com o quê",styleCategory:"Strategic"},{id:"strategic-2-2",text:"Tenho muitas roupas mas sempre sinto que não tenho nada para vestir",styleCategory:"Strategic"},{id:"strategic-2-3",text:"Não consigo criar looks diferentes com as peças que tenho",styleCategory:"Strategic"},{id:"strategic-2-4",text:"Compro peças por impulso que depois não uso",styleCategory:"Strategic"}]},{id:"strategic-3",title:"Como você aprende melhor sobre estilo e moda?",type:"text",multiSelect:1,options:[{id:"strategic-3-1",text:"Vendo exemplos visuais e imagens de referência",styleCategory:"Strategic"},{id:"strategic-3-2",text:"Lendo guias detalhados com explicações passo-a-passo",styleCategory:"Strategic"},{id:"strategic-3-3",text:"Com exemplos práticos que posso aplicar no meu dia-a-dia",styleCategory:"Strategic"},{id:"strategic-3-4",text:"Com orientação personalizada para o meu caso específico",styleCategory:"Strategic"}]},{id:"strategic-4",title:"O que você mais valoriza em um guia de estilo?",type:"text",multiSelect:1,options:[{id:"strategic-4-1",text:"Praticidade e facilidade de aplicação",styleCategory:"Strategic"},{id:"strategic-4-2",text:"Exemplos de looks montados para diferentes ocasiões",styleCategory:"Strategic"},{id:"strategic-4-3",text:"Explicações detalhadas sobre o porquê das recomendações",styleCategory:"Strategic"},{id:"strategic-4-4",text:"Dicas para economizar e aproveitar melhor o que já tenho",styleCategory:"Strategic"}]},{id:"strategic-5",title:"Você já considerou investir em algum guia ou consultoria de estilo no passado?",type:"text",multiSelect:1,options:[{id:"strategic-5-1",text:"Sim, já pesquisei mas não cheguei a comprar",styleCategory:"Strategic"},{id:"strategic-5-2",text:"Sim, já investi em algum curso/guia/consultoria",styleCategory:"Strategic"},{id:"strategic-5-3",text:"Não, esta é a primeira vez que considero isso",styleCategory:"Strategic"},{id:"strategic-5-4",text:"Prefiro não responder",styleCategory:"Strategic"}]},{id:"strategic-6",title:"Quanto você estaria disposta a investir em um guia completo de estilo personalizado?",type:"text",multiSelect:1,options:[{id:"strategic-6-1",text:"Menos de R$100",styleCategory:"Strategic"},{id:"strategic-6-2",text:"Entre R$100 e R$300",styleCategory:"Strategic"},{id:"strategic-6-3",text:"Entre R$300 e R$500",styleCategory:"Strategic"},{id:"strategic-6-4",text:"Mais de R$500",styleCategory:"Strategic"}]},{id:"strategic-7",title:"Qual desses resultados você mais gostaria de alcançar com os Guias de Estilo e Imagem?",type:"text",multiSelect:1,imageUrl:"https://res.cloudinary.com/dqljyf76t/image/upload/f_auto,q_70,dpr_1.0,e_sharpen:40/t_Antes%20e%20Depois%20-%20de%20Descobrir%20seu%20Estilo/v1745459978/20250423_1704_Transforma%C3%A7%C3%A3o_no_Closet_Moderno_simple_compose_01jsj3xvy6fpfb6pyd5shg5eak_1_appany.webp",options:[{id:"strategic-7-1",text:"Montar looks com mais facilidade e confiança",styleCategory:"Strategic"},{id:"strategic-7-2",text:"Usar o que já tenho e me sentir estilosa",styleCategory:"Strategic"},{id:"strategic-7-3",text:"Comprar com mais consciência e sem culpa",styleCategory:"Strategic"},{id:"strategic-7-4",text:"Ser admirada pela imagem que transmito",styleCategory:"Strategic"},{id:"strategic-7-5",text:"Resgatar peças esquecidas e criar novos looks com estilo",styleCategory:"Strategic"}]}],L=({currentQuestionIndex:t,answers:s,onAnswer:i,onNextClick:r})=>{const[o,n]=a.useState(Date.now()),[l,c]=a.useState(!1);return a.useEffect((()=>{l||(p("strategic"),c(!0))}),[l]),a.useEffect((()=>{n(Date.now())}),[t]),t>=O.length?null:e.jsx(b,{children:e.jsx(F,{question:O[t],onAnswer:i,currentAnswers:s[O[t].id]||[],autoAdvance:!1,onNextClick:r,showQuestionImage:!0,isStrategicQuestion:!0})},o)},R=({user:t,currentQuestionIndex:s,totalQuestions:a,showingStrategicQuestions:i,currentStrategicQuestionIndex:r,currentQuestion:o,currentAnswers:n,handleAnswerSubmit:l,handleNextClick:c,handlePrevious:d})=>{const u=(null==t?void 0:t.userName)||localStorage.getItem("userName")||"";i||null==o||o.multiSelect;return null==n||n.length,e.jsxs(e.Fragment,{children:[e.jsx(P,{userName:u,currentQuestionIndex:s,totalQuestions:a,showingStrategicQuestions:i,currentStrategicQuestionIndex:r}),e.jsx("div",{className:"container mx-auto px-4 py-8 w-full max-w-5xl",children:i?e.jsx(L,{currentQuestionIndex:r,answers:{},onAnswer:l,onNextClick:c}):e.jsx(F,{question:o,onAnswer:l,currentAnswers:n||[],onNextClick:c,showQuestionImage:!0,onPreviousClick:d,autoAdvance:!0})})]})},T=({onAnswer:t,strategicAnswers:s})=>{const[i,r]=a.useState(!0),[n,l]=a.useState(0),c=O[n],d=c&&s[c.id]||[];return e.jsx("div",{className:"min-h-screen bg-[#FAF9F7] px-4 py-10 flex items-start justify-center",children:e.jsx("div",{className:"max-w-3xl w-full mx-auto",children:i?e.jsxs(S,{className:"p-8 space-y-8 bg-white shadow-lg border-[#B89B7A]/20 mb-10",children:[e.jsx("h2",{className:"text-2xl font-playfair text-[#432818] text-center tracking-normal font-bold mt-4",children:"Enquanto calculamos o seu resultado..."}),e.jsxs("p",{className:"text-[#1A1818]/90 text-lg",children:["Queremos te fazer algumas perguntas que vão tornar sua ",e.jsx("strong",{className:"text-[#432818]",children:"experiência"})," ainda mais ",e.jsx("strong",{className:"text-[#432818]",children:"completa"}),"."]}),e.jsxs("p",{className:"text-[#1A1818]/90 text-lg",children:["A ideia é simples: te ajudar a enxergar com mais ",e.jsx("strong",{className:"text-[#432818]",children:"clareza"})," onde você está agora — e para onde pode ir com mais ",e.jsx("strong",{className:"text-[#432818]",children:"intenção"}),", ",e.jsx("strong",{className:"text-[#432818]",children:"leveza"})," e ",e.jsx("strong",{className:"text-[#432818]",children:"autenticidade"}),"."]}),e.jsx("div",{className:"bg-gradient-to-r from-[#B89B7A]/10 to-[#432818]/10 p-6 rounded-lg border border-[#B89B7A]/20",children:e.jsxs("p",{className:"text-[#432818] italic text-center font-medium text-lg",children:["Responda com ",e.jsx("strong",{className:"text-[#432818] not-italic",children:"sinceridade"}),". Isso é só entre você e a sua ",e.jsx("strong",{className:"text-[#432818] not-italic",children:"nova versão"}),"."]})}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(x,{variant:"default",size:"lg",onClick:()=>r(!1),className:"bg-[#B89B7A] text-white",children:"Continuar"})})]}):e.jsx(S,{className:"p-8 space-y-6 bg-white shadow-lg border-[#B89B7A]/20 mb-10",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-playfair text-center mb-2 text-[#432818]",children:O[n].title}),e.jsx("p",{className:"text-[#1A1818]/50 text-center text-xs mt-1",children:"Selecione 1 opção para avançar"})]}),e.jsx(F,{question:O[n],onAnswer:e=>{try{t(e),e.selectedOptions.length}catch(s){o({title:"Erro na transição do quiz",description:"Não foi possível processar sua resposta. Por favor, tente novamente.",variant:"destructive"})}},currentAnswers:d,autoAdvance:!0,hideTitle:!0,onNextClick:()=>{n<O.length-1?l((e=>e+1)):t({questionId:c.id,selectedOptions:d})}},`strategic-${n}`)]})})})})},$=({onShowResult:s})=>{const[i,o]=a.useState(0),[n,l]=a.useState(0),c=r(),d=["Analisando suas escolhas...","Identificando seu estilo predominante...","Calculando combinações complementares...","Preparando seu resultado personalizado..."];return a.useEffect((()=>{Promise.resolve().then((()=>(p("results"),!0)));const e=setInterval((()=>{o((t=>t>=100?(clearInterval(e),100):t+(t<50?1.3:1.5)))}),8),t=setInterval((()=>{l((e=>e<d.length-1?e+1:e))}),200);return()=>{clearInterval(e),clearInterval(t)}}),[d.length]),a.useEffect((()=>{i>=98&&(s?s():c("/resultado"))}),[i,s,c]),e.jsx("div",{className:"fixed inset-0 bg-[#fffaf7] z-50 flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("div",{className:"flex justify-center mb-10",children:e.jsx("img",{src:"https://res.cloudinary.com/dqljyf76t/image/upload/f_auto,q_70,dpr_1.0,e_sharpen:40/f_auto,q_auto,dpr_auto,e_sharpen:80/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",alt:"Gisele Galvão",className:"h-16 w-auto",width:128,height:64,loading:"eager",fetchPriority:"high",style:{objectFit:"contain",background:"none"}})}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-playfair text-[#aa6b5d] mb-2",children:"Finalizando Seu Quiz"}),e.jsx("p",{className:"text-[#3a3a3a] font-inter",children:"Estamos preparando seu resultado personalizado"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"h-2 w-full bg-[#F3E8E6] rounded-full overflow-hidden",children:e.jsx(t.div,{className:"h-full bg-gradient-to-r from-[#B89B7A] to-[#aa6b5d]",initial:{width:"0%"},animate:{width:`${i}%`},transition:{ease:"easeInOut"}})}),e.jsxs("div",{className:"text-right text-sm text-[#8F7A6A] mt-1",children:[i,"%"]})]}),e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center text-[#3a3a3a] font-medium font-inter",children:d[n]},n),e.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-1/3 bg-[#B89B7A]/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/4 h-1/4 bg-[#aa6b5d]/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]})})},D=({showingTransition:t,showingFinalTransition:s,handleStrategicAnswer:a,strategicAnswers:i,handleShowResult:r})=>s?e.jsx($,{onShowResult:r}):t?e.jsx(T,{onAnswer:a,strategicAnswers:i}):null,U=({canProceed:t,onNext:s,onPrevious:i,currentQuestionType:r,selectedOptionsCount:o,isLastQuestion:n=!1})=>{const[l,c]=a.useState(!1),[d,u]=a.useState(null);a.useEffect((()=>{if(d&&(clearTimeout(d),u(null)),t){c(!0);const e=setTimeout((()=>{c(!1)}),2e3);let t=!1;if(("normal"===r&&3===o||"strategic"===r&&o>=1)&&(t=!0),t){const e=setTimeout((()=>{s()}),1500);u(e)}return()=>{clearTimeout(e),d&&clearTimeout(d)}}}),[t,r,o,s]);return e.jsx("div",{className:"mt-6 w-full px-4 md:px-0",children:e.jsxs("div",{className:"flex flex-col items-center w-full",children:[!t&&"strategic"!==r&&e.jsx("p",{className:"text-sm text-[#8F7A6A] mb-3",children:t?"":"strategic"===r?"Selecione 1 opção para continuar":"Selecione 3 opções para continuar"}),e.jsxs("div",{className:"flex justify-center items-center w-full gap-3",children:[i&&e.jsx(x,{variant:"outline",onClick:i,className:"text-[#8F7A6A] border-[#8F7A6A] hover:bg-[#F3E8E6]/50 hover:text-[#A38A69] py-3 px-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[#B89B7A] focus:ring-opacity-50",children:"Voltar"}),"strategic"===r?e.jsx(x,{onClick:s,disabled:!t,className:`\n                py-3 px-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-opacity-50\n                ${t?"bg-brand-primary hover:bg-brand-primary/90 text-white focus:ring-brand-primary":"bg-gray-300 text-gray-500 cursor-not-allowed"}\n              `,children:"Continuar"}):e.jsx(x,{onClick:s,disabled:!t,className:`\n                py-3 px-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-opacity-50\n                ${t?"bg-brand-primary hover:bg-brand-primary/90 text-white focus:ring-brand-primary":"bg-gray-300 text-gray-500 cursor-not-allowed"} \n                ${l?"scale-105 shadow-lg ring-2 ring-brand-primary ring-opacity-75":""}\n              `,children:n?"Ver Resultado":"Próximo"})]})]})})},G=({message:t="Carregando...",showLogo:s=!0,role:a="status","aria-busy":i=!0,spinnerSize:r="md",spinnerColor:o="#B89B7A"})=>e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#FEFEFE]",role:a,"aria-busy":i,children:[s&&e.jsx("div",{className:"w-28 h-auto mb-6",children:e.jsx("img",{src:"https://res.cloudinary.com/dqljyf76t/image/upload/f_auto,q_70,dpr_1.0,e_sharpen:40/f_auto,q_70,w_112,h_56,c_fit,dpr_auto/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",alt:"Logo Gisele Galvão",width:112,height:56,loading:"eager",fetchPriority:"high",decoding:"async",style:{objectFit:"contain",imageRendering:"crisp-edges"}})}),e.jsx(n,{size:r,color:o,thickness:"normal",className:"mb-4"}),e.jsx("p",{className:"text-[#432818] font-medium font-inter",children:t})]}),M=()=>e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#FBF8F4]",children:[e.jsx("div",{className:"w-36 h-auto mb-6",children:e.jsx("img",{src:"https://res.cloudinary.com/dqljyf76t/image/upload/f_auto,q_70,dpr_1.0,e_sharpen:40/f_auto,q_70,w_140,h_60,c_fit,dpr_auto/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",alt:"Logo Gisele Galvão",width:140,height:60,loading:"eager",fetchPriority:"high",decoding:"async",style:{objectFit:"contain",imageRendering:"crisp-edges",maxWidth:"100%",background:"none"}})}),e.jsx("p",{className:"text-[#432818] font-medium font-inter",children:"Preparando sua experiência..."})]}),V=({isLoading:s,children:a,message:i="Carregando o quiz...",useQuizIntroLoading:r=!1})=>s?r?e.jsx(M,{}):e.jsx(G,{message:i,spinnerSize:"lg"}):e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},children:a}),W=()=>{var i;const{user:r}=l(),[n,d]=a.useState(!1),[u,m]=a.useState(!1),[g,x]=a.useState(!1),[p,f]=a.useState(0),[y,v]=a.useState({}),[b,w]=a.useState(!1),[j,S]=a.useState(0),[E,I]=a.useState(!1),{currentQuestion:Q,currentQuestionIndex:k,currentAnswers:B,isLastQuestion:z,handleAnswer:F,handleNext:P,handlePrevious:L,totalQuestions:T,calculateResults:$,handleStrategicAnswer:G,submitQuizIfComplete:M,canProceed:W,isInitialLoadComplete:J}=c();a.useEffect((()=>{if(J){const e=setTimeout((()=>{I(!0)}),300);return()=>clearTimeout(e)}}),[J]),a.useEffect((()=>{const e=T+O.length;let t=0;t=n?T+p:k;const s=Math.round(t/e*100);S(s)}),[k,p,n,T]),a.useEffect((()=>{if(!b){localStorage.setItem("quiz_start_time",Date.now().toString());const e=(null==r?void 0:r.userName)||localStorage.getItem("userName")||"Anônimo",t=(null==r?void 0:r.email)||localStorage.getItem("userEmail");N(e,t),w(!0)}}),[b,r]);const H=a.useCallback((e=>{try{v((t=>({...t,[e.questionId]:e.selectedOptions}))),G(e.questionId,e.selectedOptions),C(e.questionId,e.selectedOptions,p+T,T+O.length);const t=(p+T+1)/(T+O.length)*100;if(t>=45&&t<=55&&C("quiz_middle_point",["reached"],p+T,T+O.length),p===O.length-1)x(!0),A();else{const e=p+1;if(e<O.length){const t=O[e];if(t.imageUrl&&h([{src:t.imageUrl,id:`strategic-${e}`,category:"strategic",tags:[],alt:`Question ${e}`,preloadPriority:3}],{quality:95}),e+1<O.length){const t=O[e+1];t.imageUrl&&h([{src:t.imageUrl,id:`strategic-${e+1}`,category:"strategic",tags:[],alt:`Question ${e+1}`,preloadPriority:2}],{quality:95})}}f((e=>e+1))}}catch(t){o({title:"Erro no processamento da resposta",description:"Não foi possível processar sua resposta. Por favor, tente novamente.",variant:"destructive"})}}),[p,G,T]),K=a.useCallback((e=>{try{F(e.questionId,e.selectedOptions),C(e.questionId,e.selectedOptions,k,T);const t=(k+1)/(T+O.length)*100;t>=20&&t<=30&&C("quiz_first_quarter",["reached"],k,T+O.length)}catch(t){o({title:"Erro na submissão da resposta",description:"Não foi possível processar sua resposta. Por favor, tente novamente.",variant:"destructive"})}}),[k,F,T]),X=a.useCallback((()=>{try{const e=M();localStorage.setItem("strategicAnswers",JSON.stringify(y)),(null==e?void 0:e.primaryStyle)&&_(e.primaryStyle.category),window.location.href="/resultado"}catch(e){o({title:"Erro ao mostrar resultado",description:"Não foi possível carregar o resultado. Por favor, tente novamente.",variant:"destructive"})}}),[y,M]),Y=a.useCallback((()=>{z?($(),m(!0),C("quiz_main_complete",["completed"],T,T+O.length)):P()}),[$,P,z,T]);return a.useCallback((()=>{if(!Q)return!1;const e=Q.multiSelect||1;return((null==B?void 0:B.length)||0)>=e}),[null==B?void 0:B.length,Q]),e.jsx(V,{isLoading:!E,useQuizIntroLoading:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-1 bg-gray-200 z-50",children:e.jsx("div",{className:"h-full bg-[#b29670]",style:{width:`${j}%`},role:"progressbar","aria-valuenow":j,"aria-valuemin":0,"aria-valuemax":100})}),e.jsx(q,{children:e.jsx(s,{mode:"wait",children:u||g?e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:e.jsx(D,{showingTransition:u,showingFinalTransition:g,handleStrategicAnswer:H,strategicAnswers:y,handleShowResult:X})},"transition"):e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[e.jsx(R,{user:r,currentQuestionIndex:k,totalQuestions:T,showingStrategicQuestions:n,currentStrategicQuestionIndex:p,currentQuestion:Q,currentAnswers:B,handleAnswerSubmit:K,handleNextClick:Y,handlePrevious:L}),e.jsx(U,{currentQuestionType:(null==(i=null==Q?void 0:Q.id)?void 0:i.startsWith("strategic"))?"strategic":"normal",selectedOptionsCount:(null==B?void 0:B.length)||0,isLastQuestion:z,onNext:Y,onPrevious:L,canProceed:W})]},"content")})})]})})},J=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{V as L,W as Q,z as a,J as b};
