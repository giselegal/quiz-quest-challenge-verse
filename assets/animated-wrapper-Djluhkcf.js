import{j as e}from"./vendor-ui-osK9DzZo.js";import{r as t}from"./vendor-react-BFBzZzDX.js";import{g as i,d as o,i as s,c as a}from"./quiz-intro-BplHFC3N.js";const l=(e,t={})=>{if(!e||!e.includes("cloudinary.com"))return e;const i={width:0,height:0,quality:85,format:"auto",crop:"fill",...t},o=e.split("/upload/");if(2!==o.length)return e;const s=o[1],a=s.split("/"),l=a[0].includes("_")||a[0].includes(",")||a[0].startsWith("f_");let n=`f_${i.format}`;return i.quality&&(n+=`,q_${i.quality}`),i.width&&i.height?n+=`,c_${i.crop},w_${i.width},h_${i.height}`:i.width?n+=`,w_${i.width}`:i.height&&(n+=`,h_${i.height}`),l?`${o[0]}/upload/${n}/${a.slice(1).join("/")}`:`${o[0]}/upload/${n}/${s}`},n=(e,t={})=>{if(!e||!e.includes("cloudinary.com"))return e;const{width:i=30,quality:o=20}=t,s=e.split("/upload/");return 2!==s.length?e:`${s[0]}/upload/f_auto,q_${o},w_${i}/${s[1].split("/").slice(1).join("/")}`},c=(e,t=[320,640,960,1280])=>{if(!e||!e.includes("cloudinary.com"))return{srcSet:e,sizes:"100vw"};return{srcSet:t.map((t=>`${l(e,{width:t,quality:85,format:"auto"})} ${t}w`)).join(", "),sizes:"(max-width: 768px) 100vw, 50vw"}};function r({src:l,alt:r,width:d,height:u,className:h,priority:m=!1,onLoad:f,objectFit:g="cover",style:w}){const[j,v]=t.useState(!1),[p,y]=t.useState(!1),[$,b]=t.useState(!1),x=t.useMemo((()=>l?i(l):void 0),[l]),_=t.useMemo((()=>l?n(l):""),[l]),q=t.useMemo((()=>{if(!l)return"";const e=d||(null==x?void 0:x.width)||void 0,t=u||(null==x?void 0:x.height)||void 0;return o(l,{quality:95,format:"auto",width:e,height:t})}),[l,d,u,x]),N=t.useMemo((()=>l&&d&&d>300?c(l,[d/2,d,1.5*d]):{srcSet:"",sizes:""}),[l,d]);return t.useEffect((()=>{if(v(!1),b(!1),y(!1),l&&m){if(s(l))v(!0),null==f||f();else{const e=new Image;e.src=q,e.onload=()=>{v(!0),null==f||f()},e.onerror=()=>y(!0)}const e=new Image;e.src=_,e.onload=()=>b(!0)}}),[q,_,m,l,f]),e.jsxs("div",{className:"relative",style:{width:(null==w?void 0:w.width)||"100%",height:(null==w?void 0:w.height)||(u?`${u}px`:"auto"),...w},children:[!j&&!p&&e.jsxs(e.Fragment,{children:[$&&e.jsx("img",{src:_,alt:"",width:d,height:u,className:a("absolute inset-0 w-full h-full","cover"===g&&"object-cover","contain"===g&&"object-contain","fill"===g&&"object-fill","none"===g&&"object-none","scale-down"===g&&"object-scale-down","blur-xl scale-110"),"aria-hidden":"true"}),e.jsx("div",{className:"absolute inset-0 bg-gray-100 animate-pulse rounded"})]}),e.jsx("img",{src:q,alt:(null==x?void 0:x.alt)||r,width:d,height:u,loading:m?"eager":"lazy",decoding:m?"sync":"async",fetchPriority:m?"high":"auto",srcSet:N.srcSet||void 0,sizes:N.sizes||void 0,onLoad:()=>{v(!0),null==f||f()},onError:()=>y(!0),className:a("w-full h-full transition-opacity duration-300",!j&&"opacity-0",j&&"opacity-100","cover"===g&&"object-cover","contain"===g&&"object-contain","fill"===g&&"object-fill","none"===g&&"object-none","scale-down"===g&&"object-scale-down",h),style:w}),p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded",children:e.jsx("span",{className:"text-sm text-gray-500",children:"Imagem não disponível"})})]})}const d=({children:t,className:i,...o})=>e.jsx("div",{className:a(i),...o,children:t});export{d as A,r as O,c as a,n as g,l as o};
