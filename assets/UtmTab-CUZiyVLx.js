import{j as e}from"./vendor-ui-osK9DzZo.js";import{c as t,g as r,r as n}from"./vendor-react-BFBzZzDX.js";import{C as o,b as a,c as i,d as s,a as c}from"./card-BvxQYS25.js";import{T as l,a as u,b as p,c as f,d,e as m}from"./table-BWDfpsjA.js";import{G as y,C as h}from"./GridLayout-YBScUK24.js";import{s as v}from"./client-ByVjw6lx.js";import{d as b,_ as g,q as x,r as j,s as O,i as A,t as k,v as w,c as P,w as S,x as E,y as T,D as N,e as R,j as C,m as I,S as L,A as D,z as _,g as F,h as M,F as B,l as K,u as V,G as U,H as $,f as z,b as G,I as Z,J as q,K as H,o as W,M as J,R as X,T as Y,B as Q,C as ee,X as te,Y as re,a as ne}from"./BarChart-S_RUlykW.js";import{c as oe}from"./ui-components-DOTaqTTj.js";import"./quiz-intro-BplHFC3N.js";import"./analytics-nnBgKcWZ.js";var ae=["points","className","baseLinePoints","connectNulls"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ie.apply(this,arguments)}function se(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ce(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue=function(e){return e&&e.x===+e.x&&e.y===+e.y},pe=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){ue(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),ue(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce((function(e,t){return[].concat(ce(e),ce(t))}),[])]);var n=r.map((function(e){return e.reduce((function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===r.length?"".concat(n,"Z"):n},fe=function(e){var r=e.points,n=e.className,o=e.baseLinePoints,a=e.connectNulls,i=se(e,ae);if(!r||!r.length)return null;var s=oe("recharts-polygon",n);if(o&&o.length){var c=i.stroke&&"none"!==i.stroke,l=function(e,t,r){var n=pe(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(pe(t.reverse(),r).slice(1))}(r,o,a);return t.createElement("g",{className:s},t.createElement("path",ie({},b(i,!0),{fill:"Z"===l.slice(-1)?i.fill:"none",stroke:"none",d:l})),c?t.createElement("path",ie({},b(i,!0),{fill:"none",d:pe(r,a)})):null,c?t.createElement("path",ie({},b(i,!0),{fill:"none",d:pe(o,a)})):null)}var u=pe(r,a);return t.createElement("path",ie({},b(i,!0),{fill:"Z"===u.slice(-1)?i.fill:"none",className:s,d:u}))},de=g,me=x,ye=j;const he=r((function(e,t){return e&&e.length?de(e,ye(t),me):void 0}));var ve=g,be=j,ge=O;const xe=r((function(e,t){return e&&e.length?ve(e,be(t),ge):void 0}));var je=["cx","cy","angle","ticks","axisLine"],Oe=["ticks","tick","angle","tickFormatter","stroke"];function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(this,arguments)}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Le(n.key),n)}}function Te(e,t,r){return t=Re(t),function(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ne()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ne=function(){return!!e})()}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){return(Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ae(t)?t:t+""}var De=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(e,n.PureComponent),r=e,a=[{key:"renderTickItem",value:function(e,r,n){return t.isValidElement(e)?t.cloneElement(e,r):A(e)?e(r):t.createElement(k,ke({},r,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],(o=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle,o=r.cx,a=r.cy;return w(o,a,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,o=e.ticks,a=he(o,(function(e){return e.coordinate||0}));return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:xe(o,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,r=e.cx,n=e.cy,o=e.angle,a=e.ticks,i=e.axisLine,s=Se(e,je),c=a.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),l=w(r,n,c[0],o),u=w(r,n,c[1],o),p=Pe(Pe(Pe({},b(s,!1)),{},{fill:"none"},b(i,!1)),{},{x1:l.x,y1:l.y,x2:u.x,y2:u.y});return t.createElement("line",ke({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,n=this.props,o=n.ticks,a=n.tick,i=n.angle,s=n.tickFormatter,c=n.stroke,l=Se(n,Oe),u=this.getTickTextAnchor(),p=b(l,!1),f=b(a,!1),d=o.map((function(n,o){var l=r.getTickValueCoord(n),d=Pe(Pe(Pe(Pe({textAnchor:u,transform:"rotate(".concat(90-i,", ").concat(l.x,", ").concat(l.y,")")},p),{},{stroke:"none",fill:c},f),{},{index:o},l),{},{payload:n});return t.createElement(P,ke({className:oe("recharts-polar-radius-axis-tick",S(a)),key:"tick-".concat(n.coordinate)},E(r.props,n,o)),e.renderTickItem(a,d,s?s(n.value,o):n.value))}));return t.createElement(P,{className:"recharts-polar-radius-axis-ticks"},d)}},{key:"render",value:function(){var e=this.props,r=e.ticks,n=e.axisLine,o=e.tick;return r&&r.length?t.createElement(P,{className:oe("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),o&&this.renderTicks(),T.renderCallByParent(this.props,this.getViewBox())):null}}])&&Ee(r.prototype,o),a&&Ee(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}();function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe.apply(this,arguments)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ze(n.key),n)}}function Ve(e,t,r){return t=$e(t),function(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ue()?Reflect.construct(t,r||[],$e(e).constructor):t.apply(e,r))}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ue=function(){return!!e})()}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t,r){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==_e(t)?t:t+""}Ie(De,"displayName","PolarRadiusAxis"),Ie(De,"axisType","radiusAxis"),Ie(De,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var qe,He=Math.PI/180,We=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ve(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(e,n.PureComponent),r=e,a=[{key:"renderTickItem",value:function(e,r,n){return t.isValidElement(e)?t.cloneElement(e,r):A(e)?e(r):t.createElement(k,Fe({},r,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],(o=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,o=t.radius,a=t.orientation,i=t.tickSize||8,s=w(r,n,o,e.coordinate),c=w(r,n,o+("inner"===a?-1:1)*i,e.coordinate);return{x1:s.x,y1:s.y,x2:c.x,y2:c.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*He);return r>1e-5?"outer"===t?"start":"end":r<-1e-5?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,r=e.cx,n=e.cy,o=e.radius,a=e.axisLine,i=e.axisLineType,s=Be(Be({},b(this.props,!1)),{},{fill:"none"},b(a,!1));if("circle"===i)return t.createElement(N,Fe({className:"recharts-polar-angle-axis-line"},s,{cx:r,cy:n,r:o}));var c=this.props.ticks.map((function(e){return w(r,n,o,e.coordinate)}));return t.createElement(fe,Fe({className:"recharts-polar-angle-axis-line"},s,{points:c}))}},{key:"renderTicks",value:function(){var r=this,n=this.props,o=n.ticks,a=n.tick,i=n.tickLine,s=n.tickFormatter,c=n.stroke,l=b(this.props,!1),u=b(a,!1),p=Be(Be({},l),{},{fill:"none"},b(i,!1)),f=o.map((function(n,o){var f=r.getTickLineCoord(n),d=Be(Be(Be({textAnchor:r.getTickTextAnchor(n)},l),{},{stroke:"none",fill:c},u),{},{index:o,payload:n,x:f.x2,y:f.y2});return t.createElement(P,Fe({className:oe("recharts-polar-angle-axis-tick",S(a)),key:"tick-".concat(n.coordinate)},E(r.props,n,o)),i&&t.createElement("line",Fe({className:"recharts-polar-angle-axis-tick-line"},p,f)),a&&e.renderTickItem(a,d,s?s(n.value,o):n.value))}));return t.createElement(P,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,r=e.ticks,n=e.radius,o=e.axisLine;return n<=0||!r||!r.length?null:t.createElement(P,{className:oe("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}])&&Ke(r.prototype,o),a&&Ke(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xe.apply(this,arguments)}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){at(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,it(n.key),n)}}function tt(e,t,r){return t=nt(t),function(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rt()?Reflect.construct(t,r||[],nt(e).constructor):t.apply(e,r))}function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rt=function(){return!!e})()}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function at(e,t,r){return(t=it(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Je(t)?t:t+""}Ge(We,"displayName","PolarAngleAxis"),Ge(We,"axisType","angleAxis"),Ge(We,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var st=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),at(r=tt(this,e,[t]),"pieRef",null),at(r,"sectorRefs",[]),at(r,"id",V("recharts-pie-")),at(r,"handleAnimationEnd",(function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),A(e)&&e()})),at(r,"handleAnimationStart",(function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),A(e)&&e()})),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(e,n.PureComponent),r=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,r,n){if(t.isValidElement(e))return t.cloneElement(e,r);if(A(e))return e(r);var o=oe("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return t.createElement(R,Xe({},r,{key:n,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(e,r,n){if(t.isValidElement(e))return t.cloneElement(e,r);var o=n;if(A(e)&&(o=e(r),t.isValidElement(o)))return o;var a=oe("recharts-pie-label-text","boolean"==typeof e||A(e)?"":e.className);return t.createElement(k,Xe({},r,{alignmentBaseline:"middle",className:a}),o)}}],(o=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,o=n.label,a=n.labelLine,i=n.dataKey,s=n.valueKey,c=b(this.props,!1),l=b(o,!1),u=b(a,!1),p=o&&o.offsetRadius||20,f=r.map((function(r,n){var f=(r.startAngle+r.endAngle)/2,d=w(r.cx,r.cy,r.outerRadius+p,f),m=Qe(Qe(Qe(Qe({},c),r),{},{stroke:"none"},l),{},{index:n,textAnchor:e.getTextAnchor(d.x,r.cx)},d),y=Qe(Qe(Qe(Qe({},c),r),{},{fill:"none",stroke:r.fill},u),{},{index:n,points:[w(r.cx,r.cy,r.outerRadius,f),d]}),h=i;return C(i)&&C(s)?h="value":C(i)&&(h=s),t.createElement(P,{key:"label-".concat(r.startAngle,"-").concat(r.endAngle,"-").concat(r.midAngle,"-").concat(n)},a&&e.renderLabelLineItem(a,y,"line"),e.renderLabelItem(o,m,I(r,h)))}));return t.createElement(P,{className:"recharts-pie-labels"},f)}},{key:"renderSectorsStatically",value:function(e){var r=this,n=this.props,o=n.activeShape,a=n.blendStroke,i=n.inactiveShape;return e.map((function(n,s){if(0===(null==n?void 0:n.startAngle)&&0===(null==n?void 0:n.endAngle)&&1!==e.length)return null;var c=r.isActiveIndex(s),l=i&&r.hasActiveIndex()?i:null,u=c?o:l,p=Qe(Qe({},n),{},{stroke:a?n.fill:n.stroke,tabIndex:-1});return t.createElement(P,Xe({ref:function(e){e&&!r.sectorRefs.includes(e)&&r.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},E(r.props,n,s),{key:"sector-".concat(null==n?void 0:n.startAngle,"-").concat(null==n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(s)}),t.createElement(L,Xe({option:u,isActive:c,shapeType:"sector"},p)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,r=this.props,n=r.sectors,o=r.isAnimationActive,a=r.animationBegin,i=r.animationDuration,s=r.animationEasing,c=r.animationId,l=this.state,u=l.prevSectors,p=l.prevIsAnimationActive;return t.createElement(D,{begin:a,duration:i,isActive:o,easing:s,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(r){var o=r.t,a=[],i=(n&&n[0]).startAngle;return n.forEach((function(e,t){var r=u&&u[t],n=t>0?_(e,"paddingAngle",0):0;if(r){var s=F(r.endAngle-r.startAngle,e.endAngle-e.startAngle),c=Qe(Qe({},e),{},{startAngle:i+n,endAngle:i+s(o)+n});a.push(c),i=c.endAngle}else{var l=e.endAngle,p=e.startAngle,f=F(0,l-p)(o),d=Qe(Qe({},e),{},{startAngle:i+n,endAngle:i+f+n});a.push(d),i=d.endAngle}})),t.createElement(P,null,e.renderSectorsStatically(a))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return!(r&&t&&t.length)||n&&M(n,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,r=this.props,n=r.hide,o=r.sectors,a=r.className,i=r.label,s=r.cx,c=r.cy,l=r.innerRadius,u=r.outerRadius,p=r.isAnimationActive,f=this.state.isAnimationFinished;if(n||!o||!o.length||!B(s)||!B(c)||!B(l)||!B(u))return null;var d=oe("recharts-pie",a);return t.createElement(P,{tabIndex:this.props.rootTabIndex,className:d,ref:function(t){e.pieRef=t}},this.renderSectors(),i&&this.renderLabels(o),T.renderCallByParent(this.props,null,!1),(!p||f)&&K.renderCallByParent(this.props,o,!1))}}])&&et(r.prototype,o),a&&et(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}();qe=st,at(st,"displayName","Pie"),at(st,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!U.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),at(st,"parseDeltaAngle",(function(e,t){return $(t-e)*Math.min(Math.abs(t-e),360)})),at(st,"getRealPieData",(function(e){var t=e.data,r=e.children,n=b(e,!1),o=z(r,G);return t&&t.length?t.map((function(e,t){return Qe(Qe(Qe({payload:e},n),e),o&&o[t]&&o[t].props)})):o&&o.length?o.map((function(e){return Qe(Qe({},n),e.props)})):[]})),at(st,"parseCoordinateOfPie",(function(e,t){var r=t.top,n=t.left,o=t.width,a=t.height,i=Z(o,a);return{cx:n+q(e.cx,o,o/2),cy:r+q(e.cy,a,a/2),innerRadius:q(e.innerRadius,i,0),outerRadius:q(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(o*o+a*a)/2}})),at(st,"getComposedData",(function(e){var t=e.item,r=e.offset,n=void 0!==t.type.defaultProps?Qe(Qe({},t.type.defaultProps),t.props):t.props,o=qe.getRealPieData(n);if(!o||!o.length)return null;var a=n.cornerRadius,i=n.startAngle,s=n.endAngle,c=n.paddingAngle,l=n.dataKey,u=n.nameKey,p=n.valueKey,f=n.tooltipType,d=Math.abs(n.minAngle),m=qe.parseCoordinateOfPie(n,r),y=qe.parseDeltaAngle(i,s),h=Math.abs(y),v=l;C(l)&&C(p)?(H(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v="value"):C(l)&&(H(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v=p);var b,g,x=o.filter((function(e){return 0!==I(e,v,0)})).length,j=h-x*d-(h>=360?x:x-1)*c,O=o.reduce((function(e,t){var r=I(t,v,0);return e+(B(r)?r:0)}),0);O>0&&(b=o.map((function(e,t){var r,n=I(e,v,0),o=I(e,u,t),s=(B(n)?n:0)/O,l=(r=t?g.endAngle+$(y)*c*(0!==n?1:0):i)+$(y)*((0!==n?d:0)+s*j),p=(r+l)/2,h=(m.innerRadius+m.outerRadius)/2,b=[{name:o,value:n,payload:e,dataKey:v,type:f}],x=w(m.cx,m.cy,h,p);return g=Qe(Qe(Qe({percent:s,cornerRadius:a,name:o,tooltipPayload:b,midAngle:p,middleRadius:h,tooltipPosition:x},e),m),{},{value:I(e,v),startAngle:r,endAngle:l,payload:e,paddingAngle:$(y)*c})})));return Qe(Qe({},m),{},{sectors:b,data:o})}));var ct=W({chartName:"PieChart",GraphicalChild:st,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:We},{axisType:"radiusAxis",AxisComp:De}],formatAxisMap:J,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const lt=({analyticsData:r,loading:b})=>{const[g,x]=n.useState([]),[j,O]=n.useState(b);n.useEffect((()=>{!async function(){try{O(!0);const{data:e,error:t}=await v.from("utm_analytics").select("*");if(t)return;const r=A(e||[]);x(r)}catch(e){}finally{O(!1)}}()}),[r]);const A=e=>{if(!e||0===e.length)return[{source:"google",medium:"cpc",campaign:"brand",users:250,conversions:42,conversionRate:16.8},{source:"facebook",medium:"social",campaign:"retargeting",users:180,conversions:27,conversionRate:15},{source:"instagram",medium:"social",campaign:"influencer",users:120,conversions:15,conversionRate:12.5},{source:"direct",medium:"none",campaign:"none",users:350,conversions:22,conversionRate:6.3},{source:"email",medium:"email",campaign:"newsletter",users:85,conversions:19,conversionRate:22.3}];const t={};return e.forEach((e=>{const r=`${e.utm_source||"direct"}-${e.utm_medium||"none"}-${e.utm_campaign||"none"}`;t[r]?t[r].users+=1:t[r]={source:e.utm_source||"direct",medium:e.utm_medium||"none",campaign:e.utm_campaign||"none",users:1,conversions:0,conversionRate:0}})),Object.values(t).forEach((e=>{const t=Math.floor(20*Math.random())+5;e.conversionRate=t,e.conversions=Math.round(e.users*(t/100))})),Object.values(t)},k=t.useMemo((()=>g.reduce(((e,t)=>{const r=e.find((e=>e.name===t.source));return r?r.value+=t.users:e.push({name:t.source||"direct",value:t.users}),e}),[])),[g]),w=["#8B5CF6","#10b981","#f59e0b","#ef4444","#0ea5e9","#ec4899"],P=t=>{var r;if(!t.active||!(null==(r=t.payload)?void 0:r[0]))return null;const n=t.payload[0];return e.jsxs("div",{className:"bg-white p-1.5 border border-gray-100 shadow-lg rounded-md",children:[e.jsx("p",{className:"text-[7px] font-medium mb-0.5",children:"value"===n.name?t.label:n.name}),e.jsxs("p",{className:"text-[7px] font-semibold",children:[n.value," ","conversionRate"===n.name?"%":""]})]})};return j?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Carregando dados de campanha..."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(y,{columns:2,gap:"md",children:[e.jsxs(o,{className:"border border-border/40 shadow-sm",children:[e.jsxs(a,{className:"pb-1.5",children:[e.jsx(i,{children:"Tráfego por Fonte"}),e.jsx(s,{className:"text-xs",children:"Distribuição de usuários por fonte UTM"})]}),e.jsx(c,{className:"pt-1 px-2",children:e.jsx("div",{className:"h-[100px]",children:e.jsx(X,{width:"100%",height:"100%",children:e.jsxs(ct,{margin:{top:10,right:10,bottom:10,left:10},children:[e.jsx(st,{data:k,cx:"50%",cy:"50%",labelLine:!1,outerRadius:50,fill:"#8884d8",dataKey:"value",label:({name:e,percent:t})=>`${e}: ${(100*t).toFixed(0)}%`,children:k.map(((t,r)=>e.jsx(G,{fill:w[r%w.length]},`cell-${r}`)))}),e.jsx(Y,{content:P})]})})})})]}),e.jsxs(o,{className:"border border-border/40 shadow-sm",children:[e.jsxs(a,{className:"pb-1.5",children:[e.jsx(i,{children:"Conversão por Campanha"}),e.jsx(s,{className:"text-xs",children:"Taxas de conversão por campanha de marketing"})]}),e.jsx(c,{className:"pt-1 px-2",children:e.jsx("div",{className:"h-[55px]",children:e.jsx(h,{config:{conversionRate:{label:"Taxa de Conversão (%)",theme:{light:"#8B5CF6",dark:"#A78BFA"}}},children:e.jsxs(Q,{data:g.filter((e=>e.campaign&&"none"!==e.campaign)),margin:{top:5,right:5,left:0,bottom:0},children:[e.jsx(ee,{strokeDasharray:"3 3",vertical:!1}),e.jsx(te,{dataKey:"campaign",tick:{fill:"#888888",fontSize:7},tickLine:{stroke:"#e0e0e0"}}),e.jsx(re,{tick:{fill:"#888888",fontSize:7}}),e.jsx(Y,{content:P}),e.jsx(ne,{dataKey:"conversionRate",name:"Taxa de Conversão (%)",radius:[2,2,0,0],fill:"#8B5CF6"})]})})})})]})]}),e.jsxs(o,{className:"border border-border/40 shadow-sm",children:[e.jsxs(a,{className:"pb-1.5",children:[e.jsx(i,{children:"Detalhes UTM"}),e.jsx(s,{className:"text-xs",children:"Detalhamento dos parâmetros UTM e performance"})]}),e.jsx(c,{className:"pt-1.5",children:e.jsx("div",{className:"rounded-md border border-border/40 overflow-x-auto",children:e.jsxs(l,{children:[e.jsx(u,{children:e.jsxs(p,{children:[e.jsx(f,{className:"text-xs",children:"Fonte"}),e.jsx(f,{className:"text-xs",children:"Meio"}),e.jsx(f,{className:"text-xs",children:"Campanha"}),e.jsx(f,{className:"text-xs",children:"Usuários"}),e.jsx(f,{className:"text-xs",children:"Conversões"}),e.jsx(f,{className:"text-xs",children:"Taxa de Conversão"})]})}),e.jsx(d,{children:g.length>0?g.map(((t,r)=>e.jsxs(p,{children:[e.jsx(m,{className:"py-1.5 text-xs",children:t.source||"direct"}),e.jsx(m,{className:"py-1.5 text-xs",children:t.medium||"none"}),e.jsx(m,{className:"py-1.5 text-xs",children:t.campaign||"none"}),e.jsx(m,{className:"py-1.5 text-xs",children:t.users}),e.jsx(m,{className:"py-1.5 text-xs",children:t.conversions}),e.jsxs(m,{className:"py-1.5 text-xs",children:[t.conversionRate.toFixed(1),"%"]})]},r))):e.jsx(p,{children:e.jsx(m,{colSpan:6,className:"text-center py-3 text-muted-foreground text-sm",children:"Nenhum dado UTM disponível."})})})]})})})]})]})};export{lt as UtmTab};
