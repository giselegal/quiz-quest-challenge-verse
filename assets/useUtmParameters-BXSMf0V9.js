import{r as e}from"./vendor-react-BFBzZzDX.js";import{s as t}from"./client-ByVjw6lx.js";const a=()=>{const[a,m]=e.useState({}),[r,s]=e.useState("giselegalvao.com.br");e.useEffect((()=>{const e=localStorage.getItem("domain_base");e&&s(e);const t=n();m(t),Object.keys(t).length>0&&c(t)}),[]);const c=async e=>{try{const{error:a}=await t.from("utm_analytics").insert({utm_source:e.source,utm_medium:e.medium,utm_campaign:e.campaign})}catch(a){}},n=()=>{try{const e=new URLSearchParams(window.location.search),t={};if(e.has("utm_source")&&(t.source=e.get("utm_source")||void 0),e.has("utm_medium")&&(t.medium=e.get("utm_medium")||void 0),e.has("utm_campaign")&&(t.campaign=e.get("utm_campaign")||void 0),e.has("utm_content")&&(t.content=e.get("utm_content")||void 0),e.has("utm_term")&&(t.term=e.get("utm_term")||void 0),e.has("utm_id")&&(t.id=e.get("utm_id")||void 0),e.has("fbclid")&&(t.fbclid=e.get("fbclid")||void 0),Object.keys(t).length>0)localStorage.setItem("utm_parameters",JSON.stringify(t));else{const e=localStorage.getItem("utm_parameters");if(e)return JSON.parse(e)}return t}catch(e){return{}}};return{utmParams:a,captureUtmParameters:n,isFromCampaign:e=>e?a.campaign===e:Object.keys(a).length>0,isFromSource:e=>e?a.source===e:!!a.source,getUtmParameter:e=>a[e],addUtmToUrl:e=>{if(0===Object.keys(a).length)return e;try{const t=new URL(e);return a.source&&t.searchParams.append("utm_source",a.source),a.medium&&t.searchParams.append("utm_medium",a.medium),a.campaign&&t.searchParams.append("utm_campaign",a.campaign),a.content&&t.searchParams.append("utm_content",a.content),a.term&&t.searchParams.append("utm_term",a.term),a.id&&t.searchParams.append("utm_id",a.id),a.fbclid&&t.searchParams.append("fbclid",a.fbclid),t.toString()}catch(t){return e}},domainBase:r,setBaseDomain:e=>{s(e),localStorage.setItem("domain_base",e)},generateUtmLink:(e="",t="facebook",a="social",m="brand",s,c)=>{let n=`https://${r}`;e&&!e.startsWith("/")&&(n+="/"),n+=e;const o=new URL(n);return o.searchParams.append("utm_source",t),o.searchParams.append("utm_medium",a),o.searchParams.append("utm_campaign",m),s&&o.searchParams.append("utm_content",s),c&&o.searchParams.append("utm_term",c),o.toString()}}};export{a as u};
