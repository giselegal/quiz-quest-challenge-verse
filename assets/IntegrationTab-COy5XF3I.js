import{j as e}from"./vendor-ui-osK9DzZo.js";import{r as s}from"./vendor-react-BFBzZzDX.js";import{C as a,b as t,c as r,d as n,a as c,e as l}from"./card-BvxQYS25.js";import{T as i,a as o,b as d,c as u}from"./tabs-3EbfV8Cc.js";import{c as m,B as x,I as h}from"./quiz-intro-BplHFC3N.js";import{S as p,L as g}from"./switch-jkdF1Dr4.js";import{B as j}from"./badge-nN955xTj.js";import{t as f}from"./index-CJWu_7KR.js";import{a as v,f as b,d as k,e as N,u as C,g as y,a4 as _}from"./ui-components-DOTaqTTj.js";import{u as w}from"./index-BzWa2atf.js";import{C as S}from"./check-Y0sHiPmm.js";import{R as I,a as z,b as q}from"./index-DmdtlK0J.js";import{C as F}from"./select-BrLU5xrt.js";import{C as P}from"./chevron-down-CzVrvDXY.js";import{I as E,M as A,U as R}from"./users-DzQL-och.js";import{R as T}from"./AnalyticsPage-DgmSPEBk.js";import{T as L}from"./trash-2-BqfjP_O-.js";import{S as Q}from"./shopping-cart-C_pC-GrH.js";import{E as D}from"./eye-JFQXPBVm.js";import{C as O}from"./circle-check-big-C6ALa2yZ.js";import{P as B}from"./play-f7MnLFDt.js";import"./analytics-nnBgKcWZ.js";import"./chevron-right-BdPOXfGU.js";import"./useLoadingState-B9k6n92w.js";import"./use-mobile-Bm5YhP0o.js";var X="Checkbox",[V,G]=v(X),[M,J]=V(X);function W(a){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:c,disabled:l,form:i,name:o,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:x}=a,[h,p]=N({prop:r,defaultProp:c??!1,onChange:d,caller:X}),[g,j]=s.useState(null),[f,v]=s.useState(null),b=s.useRef(!1),k=!g||(!!i||!!g.closest("form")),C={checked:h,disabled:l,setChecked:p,control:g,setControl:j,name:o,form:i,value:m,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:!ae(c)&&c,isFormControl:k,bubbleInput:f,setBubbleInput:v};return e.jsx(M,{scope:t,...C,children:se(x)?x(C):n})}var H="CheckboxTrigger",Y=s.forwardRef((({__scopeCheckbox:a,onKeyDown:t,onClick:r,...n},c)=>{const{control:l,value:i,disabled:o,checked:d,required:u,setControl:m,setChecked:x,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:g}=J(H,a),j=C(c,m),f=s.useRef(d);return s.useEffect((()=>{const e=null==l?void 0:l.form;if(e){const s=()=>x(f.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}}),[l,x]),e.jsx(k.button,{type:"button",role:"checkbox","aria-checked":ae(d)?"mixed":d,"aria-required":u,"data-state":te(d),"data-disabled":o?"":void 0,disabled:o,value:i,...n,ref:j,onKeyDown:y(t,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:y(r,(e=>{x((e=>!!ae(e)||!e)),g&&p&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())}))})}));Y.displayName=H;var U=s.forwardRef(((s,a)=>{const{__scopeCheckbox:t,name:r,checked:n,defaultChecked:c,required:l,disabled:i,value:o,onCheckedChange:d,form:u,...m}=s;return e.jsx(W,{__scopeCheckbox:t,checked:n,defaultChecked:c,disabled:i,required:l,onCheckedChange:d,name:r,form:u,value:o,internal_do_not_use_render:({isFormControl:s})=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{...m,ref:a,__scopeCheckbox:t}),s&&e.jsx(ee,{__scopeCheckbox:t})]})})}));U.displayName=X;var K="CheckboxIndicator",$=s.forwardRef(((s,a)=>{const{__scopeCheckbox:t,forceMount:r,...n}=s,c=J(K,t);return e.jsx(b,{present:r||ae(c.checked)||!0===c.checked,children:e.jsx(k.span,{"data-state":te(c.checked),"data-disabled":c.disabled?"":void 0,...n,ref:a,style:{pointerEvents:"none",...s.style}})})}));$.displayName=K;var Z="CheckboxBubbleInput",ee=s.forwardRef((({__scopeCheckbox:a,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:c,checked:l,defaultChecked:i,required:o,disabled:d,name:u,value:m,form:x,bubbleInput:h,setBubbleInput:p}=J(Z,a),g=C(r,p),j=w(l),f=_(n);s.useEffect((()=>{const e=h;if(!e)return;const s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked").set,t=!c.current;if(j!==l&&a){const s=new Event("click",{bubbles:t});e.indeterminate=ae(l),a.call(e,!ae(l)&&l),e.dispatchEvent(s)}}),[h,j,l,c]);const v=s.useRef(!ae(l)&&l);return e.jsx(k.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,required:o,disabled:d,name:u,value:m,form:x,...t,tabIndex:-1,ref:g,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})}));function se(e){return"function"==typeof e}function ae(e){return"indeterminate"===e}function te(e){return ae(e)?"indeterminate":e?"checked":"unchecked"}ee.displayName=Z;const re=s.forwardRef((({className:s,...a},t)=>e.jsx(U,{ref:t,className:m("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx($,{className:m("flex items-center justify-center text-current"),children:e.jsx(S,{className:"h-4 w-4"})})})));re.displayName=U.displayName;const ne=({initialEnabled:i=!1})=>{const[o,d]=s.useState((()=>{try{const e=localStorage.getItem("event_tracking_enabled");return null!==e?"true"===e:i}catch(e){return i}})),[u,m]=s.useState((()=>{try{const e=localStorage.getItem("track_buttons");return null===e||"true"===e}catch(e){return!0}})),[h,v]=s.useState((()=>{try{const e=localStorage.getItem("track_links");return null===e||"true"===e}catch(e){return!0}})),[b,k]=s.useState((()=>{try{const e=localStorage.getItem("track_images");return null!==e&&"true"===e}catch(e){return!1}}));s.useEffect((()=>{try{const e=localStorage.getItem("event_tracking_enabled"),s=localStorage.getItem("track_buttons"),a=localStorage.getItem("track_links"),t=localStorage.getItem("track_images");null!==e&&d("true"===e),null!==s&&m("true"===s),null!==a&&v("true"===a),null!==t&&k("true"===t)}catch(e){}}),[]);return e.jsxs(a,{className:"border-border/40 shadow-sm",children:[e.jsx(t,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-base",children:"Rastreamento de Eventos"}),e.jsx(n,{className:"text-xs mt-0.5",children:"Configure os tipos de eventos que serão rastreados"})]}),e.jsx(j,{variant:o?"default":"outline",className:"text-xs",children:o?"Ativo":"Inativo"})]})}),e.jsxs(c,{className:"space-y-3 py-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 pt-1",children:[e.jsx(p,{id:"event-tracking",checked:o,onCheckedChange:d,className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-tracking",className:"text-sm",children:"Habilitar rastreamento de eventos"})]}),e.jsxs("div",{className:"pl-6 space-y-2 pt-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:"track-buttons",checked:u,onCheckedChange:e=>m(!!e),disabled:!o}),e.jsx(g,{htmlFor:"track-buttons",className:"text-sm "+(o?"":"text-muted-foreground"),children:"Rastrear cliques em botões"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:"track-links",checked:h,onCheckedChange:e=>v(!!e),disabled:!o}),e.jsx(g,{htmlFor:"track-links",className:"text-sm "+(o?"":"text-muted-foreground"),children:"Rastrear cliques em links"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:"track-images",checked:b,onCheckedChange:e=>k(!!e),disabled:!o}),e.jsx(g,{htmlFor:"track-images",className:"text-sm "+(o?"":"text-muted-foreground"),children:"Rastrear cliques em imagens"})]})]})]}),e.jsx(l,{className:"flex justify-end pt-2 pb-3",children:e.jsx(x,{size:"sm",onClick:()=>{try{localStorage.setItem("event_tracking_enabled",String(o)),localStorage.setItem("track_buttons",String(u)),localStorage.setItem("track_links",String(h)),localStorage.setItem("track_images",String(b)),f({title:"Configurações de rastreamento salvas",description:"Suas configurações de rastreamento de eventos foram atualizadas.",duration:3e3})}catch(e){f({title:"Erro ao salvar configurações",description:"Ocorreu um erro ao salvar suas configurações.",variant:"destructive"})}},className:"text-xs h-7",children:"Salvar Configurações"})})]})},ce=I,le=z,ie=q,oe=({initialId:i="",initialEnabled:o=!1,testFunction:d})=>{const[u,m]=s.useState((()=>{try{return localStorage.getItem("fb_pixel_id")||i||"1311550759901086"}catch(e){return i||"1311550759901086"}})),[v,b]=s.useState((()=>{try{const e=localStorage.getItem("tracking_enabled");return null!==e?"true"===e:o}catch(e){return o}})),[k,N]=s.useState((()=>{try{return localStorage.getItem("fb_access_token")||""}catch(e){return""}})),[C,y]=s.useState((()=>{try{const e=localStorage.getItem("fb_tracked_events");return e?JSON.parse(e):{quiz_start:!0,quiz_answer:!0,quiz_complete:!0,result_view:!0,lead_generated:!0,sale:!0,button_click:!1}}catch(e){return{quiz_start:!0,quiz_answer:!0,quiz_complete:!0,result_view:!0,lead_generated:!0,sale:!0,button_click:!1}}})),[_,w]=s.useState(!1);s.useEffect((()=>{try{const e=localStorage.getItem("fb_pixel_id"),s=localStorage.getItem("tracking_enabled"),a=localStorage.getItem("fb_access_token"),t=localStorage.getItem("fb_tracked_events");e&&m(e),null!==s&&b("true"===s),a&&N(a),t&&y(JSON.parse(t))}catch(e){}}),[]);const S=e=>{y((s=>({...s,[e]:!s[e]})))},I="Disparado quando o usuário inicia o quiz",z="Disparado quando o usuário responde a uma pergunta",q="Disparado quando o usuário completa todas as perguntas",A="Disparado quando o usuário visualiza seu resultado",R="Disparado quando o usuário fornece o email",T="Disparado quando uma venda é concluída",L="Disparado quando o usuário clica em botões importantes";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(a,{className:"border-border/40 shadow-sm",children:[e.jsx(t,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-base",children:"Facebook Pixel"}),e.jsx(n,{className:"text-xs mt-0.5",children:"Conecte-se à plataforma Facebook Ads para rastrear conversões"})]}),e.jsx(j,{variant:v?"default":"outline",className:"text-xs",children:v?"Ativo":"Inativo"})]})}),e.jsxs(c,{className:"space-y-3 py-0",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(g,{htmlFor:"fb-pixel-id",className:"text-sm",children:"ID do Facebook Pixel"}),e.jsx(h,{id:"fb-pixel-id",placeholder:"123456789012345",value:u,onChange:e=>m(e.target.value),className:"h-8 text-sm"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Encontrado no Facebook Events Manager ",">"," Data Sources ",">"," Pixel"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(g,{htmlFor:"fb-access-token",className:"text-sm",children:"Token de Acesso (opcional)"}),e.jsx(h,{id:"fb-access-token",type:"password",placeholder:"EAAEJYWeJHLABO...",value:k,onChange:e=>N(e.target.value),className:"h-8 text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Necessário para rastreamento avançado de conversões"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-1",children:[e.jsx(p,{id:"fb-tracking",checked:v,onCheckedChange:b,className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"fb-tracking",className:"text-sm",children:"Habilitar rastreamento do Facebook Pixel"})]}),e.jsxs(ce,{open:_,onOpenChange:w,className:"mt-2 border rounded-md p-2",children:[e.jsxs(le,{className:"flex w-full items-center justify-between text-sm font-medium",children:[e.jsx("span",{children:"Configurar eventos rastreados"}),_?e.jsx(F,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})]}),e.jsxs(ie,{className:"mt-2 space-y-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Selecione quais eventos serão enviados para o Facebook Pixel:"}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-quiz_start",checked:C.quiz_start||!1,onCheckedChange:()=>S("quiz_start"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-quiz_start",className:"text-xs font-medium",children:"Início do Quiz (QuizStart)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":I})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:'Ocorre quando o usuário clica em "Começar" na tela inicial'})]}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-quiz_answer",checked:C.quiz_answer||!1,onCheckedChange:()=>S("quiz_answer"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-quiz_answer",className:"text-xs font-medium",children:"Respostas do Quiz (QuizAnswer)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":z})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:"Ocorre a cada resposta do usuário em uma questão"})]}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-quiz_complete",checked:C.quiz_complete||!1,onCheckedChange:()=>S("quiz_complete"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-quiz_complete",className:"text-xs font-medium",children:"Conclusão do Quiz (QuizComplete)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":q})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:"Ocorre quando o usuário termina todas as perguntas do quiz"})]}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-result_view",checked:C.result_view||!1,onCheckedChange:()=>S("result_view"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-result_view",className:"text-xs font-medium",children:"Visualização de Resultado (ResultView)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":A})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:"Ocorre quando o usuário visualiza a página de resultado"})]}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-lead_generated",checked:C.lead_generated||!1,onCheckedChange:()=>S("lead_generated"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-lead_generated",className:"text-xs font-medium",children:"Captura de Lead (Lead)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":R})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:"Ocorre quando o usuário fornece seu endereço de email"})]}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-sale",checked:C.sale||!1,onCheckedChange:()=>S("sale"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-sale",className:"text-xs font-medium",children:"Vendas (Purchase)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":T})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:"Ocorre quando uma venda é concluída com sucesso"})]}),e.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(p,{id:"event-button_click",checked:C.button_click||!1,onCheckedChange:()=>S("button_click"),className:"data-[state=checked]:bg-blue-600"}),e.jsx(g,{htmlFor:"event-button_click",className:"text-xs font-medium",children:"Cliques em Botões (ButtonClick)"}),e.jsx(E,{className:"h-3 w-3 text-muted-foreground cursor-help","aria-label":L})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground pl-6",children:"Ocorre quando o usuário clica em botões importantes (ex: checkout)"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[e.jsx(E,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:'Acesse "Log de Eventos" para visualizar todos os eventos enviados'})]})]})]})]}),e.jsxs(l,{className:"flex justify-between pt-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>{f({title:"Testando conexão com Facebook Pixel",description:"Teste de conexão iniciado. Verifique o console do navegador para os resultados."});const e=!!d&&d();setTimeout((()=>{f({title:e?"Teste bem-sucedido":"Teste falhou",description:e?"Evento de teste do Facebook Pixel enviado com sucesso.":"Teste do Facebook Pixel falhou. Verifique suas configurações e o console do navegador.",variant:e?"default":"destructive"})}),1500)},className:"text-xs h-7",children:"Testar Conexão"}),e.jsx(x,{size:"sm",onClick:()=>{try{localStorage.setItem("fb_pixel_id",u),localStorage.setItem("tracking_enabled",String(v)),localStorage.setItem("fb_access_token",k),localStorage.setItem("fb_tracked_events",JSON.stringify(C)),f({title:"Configurações do Facebook Pixel salvas",description:"Suas configurações de integração do Facebook Pixel foram atualizadas. Atualize a página para que as mudanças tenham efeito.",duration:5e3})}catch(e){f({title:"Erro ao salvar configurações",description:"Ocorreu um erro ao salvar suas configurações. Por favor, tente novamente.",variant:"destructive"})}},className:"text-xs h-7",children:"Salvar Configurações"})]})]}),e.jsx(ne,{})]})},de=({initialId:i="",initialEnabled:o=!1})=>{const[d,u]=s.useState(i),[m,v]=s.useState(o);return e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Google Analytics"}),e.jsx(n,{children:"Connect your Google Analytics account to track user behavior"})]}),e.jsx(j,{variant:m?"default":"outline",children:m?"Active":"Inactive"})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"ga-id",children:"Measurement ID"}),e.jsx(h,{id:"ga-id",placeholder:"G-XXXXXXXXXX",value:d,onChange:e=>u(e.target.value)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Found in your Google Analytics property settings under "Data Streams"'})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"ga-tracking",checked:m,onCheckedChange:v}),e.jsx(g,{htmlFor:"ga-tracking",children:"Enable Google Analytics tracking"})]})]}),e.jsxs(l,{className:"flex justify-between",children:[e.jsx(x,{variant:"outline",onClick:()=>{f({title:"Testing Google Analytics connection",description:"Connection test initiated. Please check the console for results."})},children:"Test Connection"}),e.jsx(x,{onClick:()=>{try{localStorage.setItem("ga_id",d),localStorage.setItem("ga_enabled",String(m)),f({title:"Google Analytics settings saved",description:"Your Google Analytics integration settings have been updated."})}catch(e){f({title:"Error saving settings",description:"There was an error saving your settings. Please try again.",variant:"destructive"})}},children:"Save Settings"})]})]})},ue=()=>e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(r,{children:"API Tokens"}),e.jsx(n,{children:"Manage API tokens for direct access to analytics data"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"Create and manage API tokens to access your analytics data programmatically."}),e.jsx(x,{variant:"outline",children:"Generate New API Token"})]})]}),me=({initialUrl:i="",initialEnabled:o=!1})=>{const[d,u]=s.useState(i),[m,v]=s.useState(o);return e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Custom Webhook"}),e.jsx(n,{children:"Send analytics events to your own endpoint"})]}),e.jsx(j,{variant:m?"default":"outline",children:m?"Active":"Inactive"})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"webhook-url",children:"Webhook URL"}),e.jsx(h,{id:"webhook-url",placeholder:"https://your-api.com/analytics-webhook",value:d,onChange:e=>u(e.target.value)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your endpoint that will receive analytics events"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"webhook-enabled",checked:m,onCheckedChange:v}),e.jsx(g,{htmlFor:"webhook-enabled",children:"Enable webhook"})]})]}),e.jsxs(l,{className:"flex justify-between",children:[e.jsx(x,{variant:"outline",onClick:()=>{f({title:"Testing Webhook connection",description:"Connection test initiated. Please check the console for results."})},children:"Test Webhook"}),e.jsx(x,{onClick:()=>{try{localStorage.setItem("webhook_url",d),localStorage.setItem("webhook_enabled",String(m)),f({title:"Webhook settings saved",description:"Your webhook integration settings have been updated."})}catch(e){f({title:"Error saving settings",description:"There was an error saving your settings. Please try again.",variant:"destructive"})}},children:"Save Settings"})]})]})},xe=()=>e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(r,{children:"More Marketing Platforms"}),e.jsx(n,{children:"Connect additional marketing and advertising platforms"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-muted-foreground",children:"Google Ads, TikTok Pixel, LinkedIn Insight Tag, and other platform integrations coming soon."})})]}),he=()=>{const[l,i]=s.useState([]),[o,d]=s.useState(null),u=()=>{try{const e=localStorage.getItem("fb_pixel_event_log"),s=e?JSON.parse(e):[];i(s)}catch(e){i([])}};s.useEffect((()=>{u();const e=setInterval((()=>{u()}),5e3);return()=>clearInterval(e)}),[]);const m=s=>{switch(s){case"QuizStart":return e.jsx(B,{className:"h-4 w-4"});case"QuizAnswer":default:return e.jsx(E,{className:"h-4 w-4"});case"QuizComplete":return e.jsx(O,{className:"h-4 w-4"});case"ResultView":return e.jsx(D,{className:"h-4 w-4"});case"Lead":return e.jsx(R,{className:"h-4 w-4"});case"Purchase":return e.jsx(Q,{className:"h-4 w-4"});case"ButtonClick":return e.jsx(A,{className:"h-4 w-4"})}},h=e=>{switch(e){case"QuizStart":return"bg-blue-500";case"QuizAnswer":return"bg-purple-500";case"QuizComplete":return"bg-green-500";case"ResultView":return"bg-yellow-500";case"Lead":return"bg-indigo-500";case"Purchase":return"bg-red-500";case"ButtonClick":return"bg-orange-500";default:return"bg-gray-500"}},p=o?l.filter((e=>e.type===o)):l;return e.jsxs(a,{className:"border-border/40 shadow-sm",children:[e.jsxs(t,{className:"pb-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-base",children:"Log de Eventos Facebook Pixel"}),e.jsx(n,{className:"text-xs mt-0.5",children:"Eventos enviados para o Facebook Pixel"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>u(),children:[e.jsx(T,{className:"h-3.5 w-3.5 mr-1"}),"Atualizar"]}),e.jsxs(x,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>(localStorage.removeItem("fb_pixel_event_log"),void i([])),children:[e.jsx(L,{className:"h-3.5 w-3.5 mr-1"}),"Limpar"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.jsx(j,{variant:null===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d(null),children:"Todos"}),e.jsx(j,{variant:"QuizStart"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("QuizStart"),children:"Início Quiz"}),e.jsx(j,{variant:"QuizAnswer"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("QuizAnswer"),children:"Respostas"}),e.jsx(j,{variant:"QuizComplete"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("QuizComplete"),children:"Conclusão"}),e.jsx(j,{variant:"ResultView"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("ResultView"),children:"Resultados"}),e.jsx(j,{variant:"Lead"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("Lead"),children:"Leads"}),e.jsx(j,{variant:"Purchase"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("Purchase"),children:"Compras"}),e.jsx(j,{variant:"ButtonClick"===o?"default":"outline",className:"cursor-pointer text-[10px] h-5",onClick:()=>d("ButtonClick"),children:"Cliques"})]})]}),e.jsx(c,{className:"max-h-[400px] overflow-y-auto pb-0",children:e.jsx("div",{className:"space-y-2",children:0===p.length?e.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:o?`Nenhum evento "${o}" registrado`:"Nenhum evento registrado"}):p.map(((s,a)=>e.jsxs("div",{className:"text-xs border rounded-md p-2",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`rounded-full p-1.5 ${h(s.type)}`,children:m(s.type)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.type}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:new Date(s.timestamp).toLocaleString("pt-BR")})]})]})}),s.details&&e.jsx("div",{className:"mt-2 pl-8 text-[10px] text-muted-foreground",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(s.details,null,2)})})]},a)))})})]})},pe=({analyticsData:l,testFunction:m})=>{const[x,h]=s.useState("tracking");return e.jsx("div",{className:"space-y-6",children:e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(r,{children:"Integrações e Conexões"}),e.jsx(n,{children:"Conecte seus dados a outras plataformas e serviços"})]}),e.jsx(c,{children:e.jsxs(i,{defaultValue:x,onValueChange:h,className:"space-y-4",children:[e.jsxs(o,{className:"grid w-full grid-cols-2 md:grid-cols-6 gap-2",children:[e.jsx(d,{value:"tracking",children:"Pixels"}),e.jsx(d,{value:"analytics",children:"Analytics"}),e.jsx(d,{value:"marketing",children:"Marketing"}),e.jsx(d,{value:"api",children:"API"}),e.jsx(d,{value:"webhooks",children:"Webhooks"}),e.jsx(d,{value:"eventlog",children:"Log de Eventos"})]}),e.jsx(u,{value:"tracking",children:e.jsx("div",{className:"space-y-4",children:e.jsx(oe,{testFunction:m})})}),e.jsx(u,{value:"analytics",children:e.jsx("div",{className:"space-y-4",children:e.jsx(de,{})})}),e.jsx(u,{value:"marketing",children:e.jsx("div",{className:"space-y-4",children:e.jsx(xe,{})})}),e.jsx(u,{value:"api",children:e.jsx("div",{className:"space-y-4",children:e.jsx(ue,{})})}),e.jsx(u,{value:"webhooks",children:e.jsx("div",{className:"space-y-4",children:e.jsx(me,{})})}),e.jsx(u,{value:"eventlog",children:e.jsx("div",{className:"space-y-4",children:e.jsx(he,{})})})]})})]})})};export{pe as IntegrationTab,pe as default};
