import{j as e}from"./vendor-ui-osK9DzZo.js";import{c as s}from"./vendor-react-BFBzZzDX.js";import{C as a,b as l,c as t,d as r,a as i}from"./card-BvxQYS25.js";import{C as o,G as d}from"./GridLayout-YBScUK24.js";import{P as n}from"./progress-BvtZe0GK.js";import{B as c,C as m,X as u,Y as x,T as v,L as p,a as j,b as h}from"./BarChart-S_RUlykW.js";import"./quiz-intro-BplHFC3N.js";import"./ui-components-DOTaqTTj.js";const b=({analyticsData:b,loading:f})=>{var N,g,y,k,C,z,w,M,L,S,V,q,F;const R=null==b?void 0:b.metrics,D=s.useMemo((()=>R?[{name:"Início Quiz",value:R.totalStarts,text:"Usuários iniciaram o quiz"},{name:"Meio (50%)",value:Math.round(.7*R.totalStarts),text:"Chegaram na metade do quiz"},{name:"Quiz Completo",value:R.totalCompletes,text:"Usuários completaram o quiz"},{name:"Resultado",value:R.totalResultViews,text:"Usuários viram seus resultados"},{name:"Checkout",value:Math.round(.45*R.totalLeads),text:"Iniciaram checkout"},{name:"Venda",value:R.totalSales,text:"Compras realizadas"}]:[]),[R]),I=["#4f46e5","#6366f1","#10b981","#f59e0b","#ef4444","#ec4899"];return f||!R?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Carregando dados do funil..."})}):e.jsx("div",{className:"space-y-4",children:e.jsxs(a,{className:"border border-border/40 shadow-sm",children:[e.jsxs(l,{className:"pb-1.5",children:[e.jsx(t,{children:"Funil de Conversão"}),e.jsx(r,{className:"text-xs",children:"Visualize a performance do seu funil de conversão"})]}),e.jsxs(i,{className:"pt-1 px-2",children:[e.jsx("div",{className:"h-[55px]",children:e.jsx(o,{config:{value:{label:"Valor",theme:{light:"#4f46e5",dark:"#818cf8"}}},children:e.jsxs(c,{data:D,layout:"vertical",margin:{top:4,right:4,left:35,bottom:0},children:[e.jsx(m,{strokeDasharray:"3 3",stroke:"#e0e0e0",horizontal:!1}),e.jsx(u,{type:"number",stroke:"#888888",tick:{fill:"#888888",fontSize:7},tickLine:{stroke:"#e0e0e0"}}),e.jsx(x,{dataKey:"name",type:"category",stroke:"#888888",tick:{fill:"#888888",fontSize:7},tickLine:{stroke:"#e0e0e0"},width:35}),e.jsx(v,{content:s=>{if(!s.active||!s.payload)return null;const a=s.payload[0].payload;return e.jsxs("div",{className:"bg-white p-1.5 border border-gray-100 shadow-lg rounded-md",children:[e.jsx("p",{className:"text-[7px] font-medium mb-0.5",children:a.name}),e.jsxs("p",{className:"text-[7px] font-semibold",children:[a.value," usuários"]}),e.jsx("p",{className:"text-[6px] text-gray-500 mt-0.5",children:a.text})]})}}),e.jsx(p,{content:e=>null}),e.jsx(j,{dataKey:"value",radius:[0,2,2,0],animationDuration:1200,animationEasing:"ease-out",children:D.map(((s,a)=>e.jsx(h,{fill:I[a%I.length]},`cell-${a}`)))})]})})}),e.jsxs(d,{columns:3,gap:"md",className:"mt-4",children:[e.jsxs(a,{className:"border border-border/60",children:[e.jsx(l,{className:"pb-1 pt-2",children:e.jsx(t,{className:"text-sm font-medium",children:"Início → Meio"})}),e.jsxs(i,{className:"space-y-1 pt-0 pb-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsxs("p",{className:"text-xs font-bold",children:[(null==(N=D[1])?void 0:N.value)?(D[1].value/D[0].value*100).toFixed(1):0,"%"]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["de ",(null==(g=D[0])?void 0:g.value)||0]})]}),e.jsx(n,{value:(null==(y=D[1])?void 0:y.value)?D[1].value/D[0].value*100:0,indicatorClassName:"bg-gradient-to-r from-blue-500 to-indigo-700",className:"h-1 bg-muted/50"})]})]}),e.jsxs(a,{className:"border border-border/60",children:[e.jsx(l,{className:"pb-1 pt-2",children:e.jsx(t,{className:"text-sm font-medium",children:"Meio → Resultado"})}),e.jsxs(i,{className:"space-y-1 pt-0 pb-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsxs("p",{className:"text-xs font-bold",children:[(null==(k=D[3])?void 0:k.value)&&(null==(C=D[1])?void 0:C.value)?(D[3].value/D[1].value*100).toFixed(1):0,"%"]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["de ",(null==(z=D[1])?void 0:z.value)||0]})]}),e.jsx(n,{value:(null==(w=D[3])?void 0:w.value)&&(null==(M=D[1])?void 0:M.value)?D[3].value/D[1].value*100:0,indicatorClassName:"bg-gradient-to-r from-green-500 to-emerald-700",className:"h-1 bg-muted/50"})]})]}),e.jsxs(a,{className:"border border-border/60",children:[e.jsx(l,{className:"pb-1 pt-2",children:e.jsx(t,{className:"text-sm font-medium",children:"Resultado → Venda"})}),e.jsxs(i,{className:"space-y-1 pt-0 pb-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsxs("p",{className:"text-xs font-bold",children:[(null==(L=D[5])?void 0:L.value)&&(null==(S=D[3])?void 0:S.value)?(D[5].value/D[3].value*100).toFixed(1):0,"%"]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["de ",(null==(V=D[3])?void 0:V.value)||0]})]}),e.jsx(n,{value:(null==(q=D[5])?void 0:q.value)&&(null==(F=D[3])?void 0:F.value)?D[5].value/D[3].value*100:0,indicatorClassName:"bg-gradient-to-r from-red-500 to-pink-700",className:"h-1 bg-muted/50"})]})]})]})]})]})})};export{b as FunnelTab};
