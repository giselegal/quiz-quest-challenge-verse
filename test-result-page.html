<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste da P√°gina de Resultados</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            max-width: 800px; 
            margin: 0 auto; 
        }
        .test-section { 
            background: #f5f5f5; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
        }
        .button { 
            background: #B89B7A; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px; 
        }
        .button:hover { 
            background: #A1835D; 
        }
        .status { 
            font-weight: bold; 
            padding: 5px; 
            border-radius: 3px; 
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <h1>üß™ Teste da P√°gina de Resultados</h1>
    
    <div class="test-section">
        <h3>1. Preparar Dados de Teste</h3>
        <button class="button" onclick="setupTestData()">Criar Dados de Teste</button>
        <button class="button" onclick="clearAllData()">Limpar Todos os Dados</button>
        <div id="setup-status"></div>
    </div>

    <div class="test-section">
        <h3>2. Verificar localStorage</h3>
        <button class="button" onclick="checkLocalStorage()">Verificar Dados</button>
        <div id="storage-status"></div>
        <pre id="storage-content"></pre>
    </div>

    <div class="test-section">
        <h3>3. Testar Navega√ß√£o</h3>
        <button class="button" onclick="goToResultPage()">Ir para /resultado</button>
        <button class="button" onclick="goToQuizPage()">Ir para /quiz</button>
        <button class="button" onclick="goToHomePage()">Ir para Home</button>
    </div>

    <div class="test-section">
        <h3>4. Logs de Debug</h3>
        <button class="button" onclick="clearLogs()">Limpar Logs</button>
        <div id="debug-logs"></div>
    </div>

    <script>
        // Fun√ß√£o para criar dados de teste completos
        function setupTestData() {
            const testData = {
                userName: 'Maria Teste',
                quiz_result: {
                    primaryStyle: { 
                        category: 'Natural', 
                        percentage: 85,
                        name: 'Natural',
                        description: 'Voc√™ tem um estilo natural e aut√™ntico'
                    },
                    secondaryStyles: [
                        { category: 'Rom√¢ntico', percentage: 72 },
                        { category: 'Cl√°ssico', percentage: 68 }
                    ],
                    userName: 'Maria Teste',
                    completedAt: new Date().toISOString()
                },
                quizResults: {
                    primaryStyle: { 
                        category: 'Natural', 
                        percentage: 85 
                    },
                    secondaryStyles: [
                        { category: 'Rom√¢ntico', percentage: 72 },
                        { category: 'Cl√°ssico', percentage: 68 }
                    ]
                }
            };

            // Salvar no localStorage
            localStorage.setItem('userName', testData.userName);
            localStorage.setItem('quiz_result', JSON.stringify(testData.quiz_result));
            localStorage.setItem('quizResults', JSON.stringify(testData.quizResults));
            
            // Tamb√©m salvar no sessionStorage
            sessionStorage.setItem('introCompleted', 'true');
            sessionStorage.setItem('quizCompleted', 'true');

            document.getElementById('setup-status').innerHTML = 
                '<div class="status success">‚úÖ Dados de teste criados com sucesso!</div>';
            
            // Verificar automaticamente
            setTimeout(checkLocalStorage, 500);
        }

        function clearAllData() {
            localStorage.clear();
            sessionStorage.clear();
            document.getElementById('setup-status').innerHTML = 
                '<div class="status warning">üóëÔ∏è Todos os dados foram limpos</div>';
            document.getElementById('storage-content').textContent = '';
            document.getElementById('storage-status').innerHTML = '';
        }

        function checkLocalStorage() {
            const userName = localStorage.getItem('userName');
            const quizResult = localStorage.getItem('quiz_result');
            const quizResults = localStorage.getItem('quizResults');
            
            let statusHtml = '';
            let contentHtml = '';

            // Verificar userName
            if (userName) {
                statusHtml += '<div class="status success">‚úÖ userName encontrado: ' + userName + '</div>';
            } else {
                statusHtml += '<div class="status error">‚ùå userName n√£o encontrado</div>';
            }

            // Verificar quiz_result
            if (quizResult) {
                statusHtml += '<div class="status success">‚úÖ quiz_result encontrado</div>';
                contentHtml += '=== quiz_result ===\n' + JSON.stringify(JSON.parse(quizResult), null, 2) + '\n\n';
            } else {
                statusHtml += '<div class="status error">‚ùå quiz_result n√£o encontrado</div>';
            }

            // Verificar quizResults
            if (quizResults) {
                statusHtml += '<div class="status success">‚úÖ quizResults encontrado</div>';
                contentHtml += '=== quizResults ===\n' + JSON.stringify(JSON.parse(quizResults), null, 2) + '\n\n';
            } else {
                statusHtml += '<div class="status warning">‚ö†Ô∏è quizResults n√£o encontrado (opcional)</div>';
            }

            // Mostrar todos os dados do localStorage
            contentHtml += '=== Todos os dados localStorage ===\n';
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                contentHtml += key + ': ' + value + '\n';
            }

            document.getElementById('storage-status').innerHTML = statusHtml;
            document.getElementById('storage-content').textContent = contentHtml;
        }

        function goToResultPage() {
            addLog('Navegando para /resultado...');
            window.location.href = '/resultado';
        }

        function goToQuizPage() {
            addLog('Navegando para /quiz...');
            window.location.href = '/quiz';
        }

        function goToHomePage() {
            addLog('Navegando para home...');
            window.location.href = '/';
        }

        function addLog(message) {
            const now = new Date().toLocaleTimeString();
            const logDiv = document.getElementById('debug-logs');
            logDiv.innerHTML += '<div>[' + now + '] ' + message + '</div>';
        }

        function clearLogs() {
            document.getElementById('debug-logs').innerHTML = '';
        }

        // Auto-verificar ao carregar a p√°gina
        window.onload = function() {
            addLog('P√°gina de teste carregada');
            checkLocalStorage();
        };
    </script>
</body>
</html>
